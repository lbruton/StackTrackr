---
name: wiki-sweep
description: Full re-population of all 9 frontend wiki pages in StakTrakrWiki. Dispatches 9 parallel background agents, one per page. Use after major refactors, large feature batches, or when wiki-audit finds widespread staleness. Not part of normal patch workflow.
allowed-tools: Bash, Read, Task
---

# Wiki Sweep

Re-populates all 9 frontend wiki pages from scratch by dispatching 9 parallel
background agents. Each agent reads the relevant source files and rewrites its page.
All changes go through a single PR â€” branch protection requires review.
Use when multiple pages are stale simultaneously.

**Warning:** Overwrites all 9 frontend pages. Only run when warranted.
For single-page updates, use `/wiki-update` instead.

## When to use

- After a major refactor touching multiple subsystems
- After a large feature batch (3+ patches) with no wiki updates
- When `/wiki-audit` reports widespread staleness (5+ pages behind)
- When onboarding a new agent context that needs a fresh wiki baseline

## Steps

### Step 1: Confirm current APP_VERSION

```bash
grep 'const APP_VERSION' /Volumes/DATA/GitHub/StakTrakr/js/constants.js
```

Use this version in all `> **Last updated:**` headers.

### Step 2: Create sweep branch

```bash
cd /Volumes/DATA/GitHub/StakTrakrWiki
git pull origin main
BRANCH="wiki-sweep/$(date +%Y%m%d)"
git checkout -b "$BRANCH"
```

### Step 3: Dispatch 9 parallel background agents

Launch all at once using the Task tool with `run_in_background: true`.

Each agent follows the page spec from `docs/plans/2026-02-23-wiki-system.md`.
Each agent writes its page to `/Volumes/DATA/GitHub/StakTrakrWiki/PAGENAME.md` (local file, NOT gh api).

| Agent | Page | Source files |
|-------|------|-------------|
| 1 | `frontend-overview.md` | `index.html`, `js/constants.js`, `sw.js`, `CLAUDE.md` |
| 2 | `data-model.md` | `js/constants.js`, `js/utils.js` |
| 3 | `storage-patterns.md` | `js/utils.js`, `js/constants.js` |
| 4 | `dom-patterns.md` | `js/utils.js`, `CLAUDE.md`, `js/about.js`, `js/init.js` |
| 5 | `sync-cloud.md` | `js/cloud-sync.js`, `js/cloud-storage.js` |
| 6 | `retail-modal.md` | `js/retail-view-modal.js`, `js/retail.js` |
| 7 | `api-consumption.md` | `js/api.js`, `js/api-health.js` |
| 8 | `release-workflow.md` | `.claude/skills/release/SKILL.md`, `.claude/skills/ship/SKILL.md`, `devops/` |
| 9 | `service-worker.md` | `sw.js`, `devops/hooks/stamp-sw-cache.sh` |

### Step 4: Wait for all agents to report DONE

Each agent outputs `DONE: PAGENAME.md written` when complete.

### Step 5: Update README.md table if needed

If any page was renamed or added, update the README.md page table directly in the local repo.

### Step 6: Commit, push, and open PR

```bash
cd /Volumes/DATA/GitHub/StakTrakrWiki
git add -A
git commit -m "sweep: rewrite all 9 frontend wiki pages

Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>"
git push -u origin "$BRANCH"

gh pr create --repo lbruton/StakTrakrWiki \
  --title "sweep: full wiki re-population $(date +%Y-%m-%d)" \
  --body "$(cat <<'EOF'
## Summary
Full re-population of all 9 frontend wiki pages from current codebase.

## Pages rewritten
- frontend-overview.md
- data-model.md
- storage-patterns.md
- dom-patterns.md
- sync-cloud.md
- retail-modal.md
- api-consumption.md
- release-workflow.md
- service-worker.md

Generated by `/wiki-sweep` skill.
EOF
)"

git checkout main
```

### Step 7: Run wiki-audit to verify

After the PR is merged, run `/wiki-audit` to confirm all pages are accurate.
