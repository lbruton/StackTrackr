body{font-family:Inter, Arial, sans-serif;padding:12px}
main{max-width:980px;margin:0 auto}
#table table{width:100%;border-collapse:collapse}
#table th, #table td{padding:6px;border:1px solid #ddd;text-align:left}
#chart{margin-top:12px}

/* Inline preview wrapper */
.table-preview-wrap{max-height:140px;overflow:auto;border:1px solid #eee;background:#fff;border-radius:4px;margin-bottom:6px}
.preview-table{width:100%;border-collapse:collapse;min-width:800px}
.preview-table th,.preview-table td{padding:6px;border:1px solid #ddd;text-align:left}
.table-note{font-size:12px;color:#666;margin-top:4px}

/* Make cells taller: roughly double the vertical padding */
.preview-table th,.preview-table td{padding-top:8px;padding-bottom:8px}

/* Row number column and sticky headers */
.preview-table .rownum{background:#fafafa;text-align:center;width:48px;position:sticky;left:0;border-right:1px solid #eee;z-index:3}
.preview-table .top-left{z-index:5}
.preview-table .col-letter{background:#f7f7fb;text-align:center}
.preview-table th.sticky-top{position:sticky;top:0;z-index:4;background:#fff}

/* Ensure the rownum column sits above the normal cells when scrolling horizontally */
.preview-table td, .preview-table th{vertical-align:middle}


/* Force visible scrollbars for macOS users who hide overlay scrollbars */
.table-preview-wrap{
	/* ensure scrollbars are always present */
	overflow: auto; /* fallback */
	overflow-y: scroll; /* always show vertical scrollbar */
	-webkit-overflow-scrolling: touch;
	/* keep space for stable scrollbar in layout */
	scrollbar-gutter: stable both-edges;
}

/* WebKit/Chromium scrollbar visuals (macOS will still respect overlay but these help when visible) */
.table-preview-wrap::-webkit-scrollbar{height:12px;width:12px}
.table-preview-wrap::-webkit-scrollbar-track{background:#f4f4f4;border-radius:6px}
.table-preview-wrap::-webkit-scrollbar-thumb{background:#cfcfcf;border-radius:6px}
.table-preview-wrap::-webkit-scrollbar-thumb:hover{background:#bfbfbf}

/* Apply similar treatment to history tables and chart containers */
.hist, .history-tables-grid, .history-charts{overflow:auto; scrollbar-gutter: stable both-edges}
.hist::-webkit-scrollbar, .history-tables-grid::-webkit-scrollbar, .history-charts::-webkit-scrollbar{height:10px;width:10px}
.hist::-webkit-scrollbar-thumb, .history-tables-grid::-webkit-scrollbar-thumb, .history-charts::-webkit-scrollbar-thumb{background:#ddd;border-radius:6px}

/* Modal styles */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:40}
.modal.open{display:flex}
.modal-content{background:#fff;border-radius:6px;max-width:95%;max-height:90%;width:95%;overflow:hidden;display:flex;flex-direction:column}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #eee}
.modal-body{padding:12px;overflow:auto}
.modal-body .table-wrap{min-width:800px}
.wide-table{border-collapse:collapse;width:100%}
.wide-table th,.wide-table td{padding:6px;border:1px solid #ddd}
.table-wrap{overflow:auto}

/* Calculation panels */
.panels{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:8px}
.panel{border:1px solid #e6e6e6;padding:8px;border-radius:6px;background:#fbfbfb}
.panel h3{margin:0 0 6px 0;font-size:13px}
.panel-output{min-height:40px;padding:6px;background:#fff;border:1px solid #eee;margin-bottom:6px;overflow:auto}
.panel-formula{width:100%;padding:6px;margin-bottom:6px}
.panel-apply{width:100%}

.panel-track{margin-top:6px;background:#eef6ff;border:1px solid #c6e0ff;padding:6px;border-radius:4px}
.panel-track[disabled]{opacity:0.6}
#tracked-summary{margin-top:8px}
#trackedCard{padding:8px;border:1px dashed #ddd;background:#fff}

.history-charts{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:8px}
.hist{background:#fff;border:1px solid #eee;padding:6px;border-radius:6px;min-height:80px}
.hist canvas{width:100%!important;height:80px!important}

/* Reduce vertical spacing between major sections */
section{margin-bottom:8px}
h2{margin-top:8px;margin-bottom:6px}

/* Main chart sizing: prevent it from expanding and creating large gaps */
#chart{display:block;width:100% !important;max-height:180px;height:140px}
#chart canvas{display:block}

.history-tables-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:12px}
.history-table{width:100%;border-collapse:collapse}
.history-table th,.history-table td{border:1px solid #e6e6e6;padding:6px;text-align:left}
.history-table th{background:#fafafa}

.warnings{margin-top:8px}
.warn{background:#fff7e6;border:1px solid #ffd39b;padding:8px;border-radius:4px;color:#663c00}
