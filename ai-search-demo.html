<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StackTrackr AI Search Enhancement Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .demo-header p {
            color: #7f8c8d;
            font-size: 16px;
        }
        
        .search-section {
            margin-bottom: 30px;
        }
        
        .search-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            border-color: #3498db;
        }
        
        .ai-toggle {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .ai-toggle.disabled {
            background: #95a5a6;
        }
        
        .ai-insights-panel {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            display: none;
        }
        
        .ai-insights-panel.visible {
            display: block;
        }
        
        .ai-insight {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .ai-badge {
            background: #9b59b6;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .ai-interpretation {
            color: #2c3e50;
            font-style: italic;
        }
        
        .ai-suggestions {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            width: 100%;
        }
        
        .suggestions-label {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .suggestion-chip {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 13px;
            cursor: pointer;
            border: 1px solid #bdc3c7;
            transition: all 0.2s;
        }
        
        .suggestion-chip:hover {
            background: #3498db;
            color: white;
        }
        
        .comparison-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .search-result-column {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }
        
        .search-result-column h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }
        
        .result-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 4px solid #3498db;
        }
        
        .result-item .item-name {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .result-item .item-details {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 4px;
        }
        
        .ai-enhanced {
            border-left-color: #9b59b6;
        }
        
        .example-queries {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .example-queries h3 {
            margin-top: 0;
            color: #856404;
        }
        
        .query-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .query-example {
            background: white;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .query-example:hover {
            background: #f1f2f6;
        }
        
        .query-example .query-text {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .query-example .query-description {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 4px;
        }
        
        .api-key-section {
            background: #e8f4f8;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .api-key-input {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 10px;
        }
        
        .status-connected {
            background: #27ae60;
        }
        
        .status-disconnected {
            background: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1>üß† StackTrackr AI Search Enhancement</h1>
            <p>Experience the future of precious metals inventory search with GPT-powered natural language processing</p>
        </div>

        <div class="api-key-section">
            <h3>üîê AI Configuration <span id="ai-status" class="status-indicator status-disconnected"></span></h3>
            <p>Enter your OpenAI API key to enable AI-powered search enhancement:</p>
            <input type="password" id="api-key-input" class="api-key-input" 
                   placeholder="sk-... (Your OpenAI API key)" 
                   onchange="updateAPIKey()">
            <p style="font-size: 13px; color: #7f8c8d; margin-top: 8px;">
                üí° Your API key is stored locally and never transmitted to StackTrackr servers
            </p>
        </div>

        <div class="search-section">
            <h3>üîç Intelligent Search</h3>
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" 
                       placeholder="Try: 'silver coins from america' or 'gold bars 1 ounce' or 'my eagles'"
                       oninput="performSearch()">
                <button id="ai-toggle" class="ai-toggle disabled" onclick="toggleAI()">
                    AI: OFF
                </button>
            </div>
            
            <div id="ai-insights" class="ai-insights-panel">
                <!-- AI insights will appear here -->
            </div>
        </div>

        <div class="comparison-section">
            <div class="search-result-column">
                <h3>üî§ Traditional Search Results</h3>
                <div id="traditional-results">
                    <p style="color: #7f8c8d; font-style: italic;">Enter a search query to see traditional results...</p>
                </div>
            </div>
            
            <div class="search-result-column">
                <h3>üß† AI-Enhanced Results</h3>
                <div id="ai-results">
                    <p style="color: #7f8c8d; font-style: italic;">Enable AI and search to see enhanced results...</p>
                </div>
            </div>
        </div>

        <div class="example-queries">
            <h3>üí° Try These Natural Language Queries</h3>
            <div class="query-examples">
                <div class="query-example" onclick="setQuery('silver coins from america')">
                    <div class="query-text">"silver coins from america"</div>
                    <div class="query-description">Finds American Silver Eagles, even with loose phrasing</div>
                </div>
                <div class="query-example" onclick="setQuery('my gold eagles')">
                    <div class="query-text">"my gold eagles"</div>
                    <div class="query-description">Understands possessive language and common abbreviations</div>
                </div>
                <div class="query-example" onclick="setQuery('one ounce gold bars')">
                    <div class="query-text">"one ounce gold bars"</div>
                    <div class="query-description">Handles spelled-out numbers and metal types</div>
                </div>
                <div class="query-example" onclick="setQuery('canadian silver')">
                    <div class="query-text">"canadian silver"</div>
                    <div class="query-description">Matches Canadian Maple Leafs and other Canadian silver</div>
                </div>
                <div class="query-example" onclick="setQuery('premium metals')">
                    <div class="query-text">"premium metals"</div>
                    <div class="query-description">AI understands context and suggests relevant items</div>
                </div>
                <div class="query-example" onclick="setQuery('what do I have in platinum')">
                    <div class="query-text">"what do I have in platinum"</div>
                    <div class="query-description">Conversational queries work naturally</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample inventory data for demo
        const sampleInventory = [
            {
                name: "American Silver Eagle",
                metal: "Silver",
                type: "Coin",
                composition: "999 Silver",
                qty: 5,
                weight: 1.0,
                serial: "ASE001"
            },
            {
                name: "American Gold Eagle",
                metal: "Gold", 
                type: "Coin",
                composition: "916 Gold",
                qty: 2,
                weight: 1.0,
                serial: "AGE001"
            },
            {
                name: "Canadian Maple Leaf",
                metal: "Silver",
                type: "Coin", 
                composition: "9999 Silver",
                qty: 10,
                weight: 1.0,
                serial: "CML001"
            },
            {
                name: "PAMP Suisse Gold Bar",
                metal: "Gold",
                type: "Bar",
                composition: "9999 Gold",
                qty: 1,
                weight: 1.0,
                serial: "PAMP001"
            },
            {
                name: "Credit Suisse Silver Bar",
                metal: "Silver",
                type: "Bar",
                composition: "999 Silver", 
                qty: 3,
                weight: 10.0,
                serial: "CS001"
            },
            {
                name: "Australian Platinum Eagle",
                metal: "Platinum",
                type: "Coin",
                composition: "9995 Platinum",
                qty: 1,
                weight: 1.0,
                serial: "APE001"
            }
        ];

        let aiEnabled = false;
        let apiKey = '';

        function updateAPIKey() {
            apiKey = document.getElementById('api-key-input').value;
            const status = document.getElementById('ai-status');
            
            if (apiKey && apiKey.startsWith('sk-')) {
                status.className = 'status-indicator status-connected';
                document.getElementById('ai-toggle').className = 'ai-toggle';
                console.log('‚úÖ API key configured');
            } else {
                status.className = 'status-indicator status-disconnected';
                document.getElementById('ai-toggle').className = 'ai-toggle disabled';
                aiEnabled = false;
                updateToggleButton();
            }
        }

        function toggleAI() {
            if (!apiKey || !apiKey.startsWith('sk-')) {
                alert('Please enter a valid OpenAI API key first');
                return;
            }
            
            aiEnabled = !aiEnabled;
            updateToggleButton();
            performSearch();
        }

        function updateToggleButton() {
            const toggle = document.getElementById('ai-toggle');
            toggle.textContent = aiEnabled ? 'AI: ON' : 'AI: OFF';
            toggle.style.background = aiEnabled ? '#27ae60' : '#95a5a6';
        }

        function setQuery(query) {
            document.getElementById('search-input').value = query;
            performSearch();
        }

        function performSearch() {
            const query = document.getElementById('search-input').value.toLowerCase();
            
            if (!query.trim()) {
                document.getElementById('traditional-results').innerHTML = 
                    '<p style="color: #7f8c8d; font-style: italic;">Enter a search query to see traditional results...</p>';
                document.getElementById('ai-results').innerHTML = 
                    '<p style="color: #7f8c8d; font-style: italic;">Enable AI and search to see enhanced results...</p>';
                document.getElementById('ai-insights').className = 'ai-insights-panel';
                return;
            }

            // Simulate traditional search (exact matching)
            const traditionalResults = sampleInventory.filter(item => 
                item.name.toLowerCase().includes(query) ||
                item.metal.toLowerCase().includes(query) ||
                item.type.toLowerCase().includes(query)
            );

            displayResults('traditional-results', traditionalResults, false);

            if (aiEnabled) {
                simulateAISearch(query);
            } else {
                document.getElementById('ai-results').innerHTML = 
                    '<p style="color: #7f8c8d; font-style: italic;">Enable AI to see enhanced results...</p>';
                document.getElementById('ai-insights').className = 'ai-insights-panel';
            }
        }

        function simulateAISearch(query) {
            // Simulate AI interpretation and enhanced results
            const aiInterpretation = getAIInterpretation(query);
            
            // Show AI insights
            displayAIInsights(aiInterpretation);
            
            // Get enhanced results
            const enhancedResults = getAIEnhancedResults(query, aiInterpretation);
            displayResults('ai-results', enhancedResults, true);
        }

        function getAIInterpretation(query) {
            // Simulate different AI interpretations based on query patterns
            const interpretations = {
                'silver coins from america': {
                    intent: 'Looking for American silver coins',
                    interpretation: 'Interpreting as American Silver Eagles and other US silver coins',
                    suggestions: [
                        { term: 'American Silver Eagle', confidence: 0.95 },
                        { term: 'US Silver', confidence: 0.85 }
                    ]
                },
                'my gold eagles': {
                    intent: 'Looking for American Gold Eagles',
                    interpretation: 'Understanding possessive "my" and "eagles" as American Gold Eagles',
                    suggestions: [
                        { term: 'American Gold Eagle', confidence: 0.98 }
                    ]
                },
                'one ounce gold bars': {
                    intent: 'Looking for 1 oz gold bars',
                    interpretation: 'Converting "one ounce" to 1 oz weight filter for gold bars',
                    suggestions: [
                        { term: '1 oz Gold Bar', confidence: 0.92 },
                        { term: 'PAMP Suisse', confidence: 0.85 }
                    ]
                },
                'canadian silver': {
                    intent: 'Looking for Canadian silver items',
                    interpretation: 'Matching Canadian origin with silver metal',
                    suggestions: [
                        { term: 'Canadian Maple Leaf', confidence: 0.95 },
                        { term: 'Royal Canadian Mint', confidence: 0.80 }
                    ]
                },
                'premium metals': {
                    intent: 'Looking for high-value items',
                    interpretation: 'Interpreting "premium" as gold and platinum items',
                    suggestions: [
                        { term: 'Gold', confidence: 0.90 },
                        { term: 'Platinum', confidence: 0.88 }
                    ]
                },
                'what do i have in platinum': {
                    intent: 'Inventory query for platinum items',
                    interpretation: 'Natural language query converted to platinum metal filter',
                    suggestions: [
                        { term: 'Platinum', confidence: 0.98 }
                    ]
                }
            };

            // Find closest match or provide generic interpretation
            const lowerQuery = query.toLowerCase();
            for (const [pattern, interp] of Object.entries(interpretations)) {
                if (lowerQuery.includes(pattern.split(' ')[0]) || pattern.includes(lowerQuery)) {
                    return interp;
                }
            }

            // Generic interpretation
            return {
                intent: 'Searching inventory',
                interpretation: `AI interpreting "${query}" with fuzzy matching and context awareness`,
                suggestions: [
                    { term: 'Silver', confidence: 0.70 },
                    { term: 'Gold', confidence: 0.70 }
                ]
            };
        }

        function getAIEnhancedResults(query, interpretation) {
            const lowerQuery = query.toLowerCase();
            
            // AI-enhanced matching logic
            const enhancedResults = sampleInventory.filter(item => {
                // Traditional exact matching
                if (item.name.toLowerCase().includes(lowerQuery) ||
                    item.metal.toLowerCase().includes(lowerQuery) ||
                    item.type.toLowerCase().includes(lowerQuery)) {
                    return true;
                }

                // AI-enhanced fuzzy matching
                if (lowerQuery.includes('america') && item.name.includes('American')) return true;
                if (lowerQuery.includes('eagle') && item.name.includes('Eagle')) return true;
                if (lowerQuery.includes('canadian') && item.name.includes('Canadian')) return true;
                if (lowerQuery.includes('one ounce') && item.weight === 1.0) return true;
                if (lowerQuery.includes('bar') && item.type === 'Bar') return true;
                if (lowerQuery.includes('coin') && item.type === 'Coin') return true;
                if (lowerQuery.includes('premium') && (item.metal === 'Gold' || item.metal === 'Platinum')) return true;
                if (lowerQuery.includes('platinum') && item.metal === 'Platinum') return true;

                return false;
            });

            return enhancedResults;
        }

        function displayAIInsights(interpretation) {
            const panel = document.getElementById('ai-insights');
            panel.className = 'ai-insights-panel visible';
            
            panel.innerHTML = `
                <div class="ai-insight">
                    <span class="ai-badge">üß† AI</span>
                    <span class="ai-interpretation">${interpretation.interpretation}</span>
                    ${interpretation.suggestions && interpretation.suggestions.length > 0 ? `
                        <div class="ai-suggestions">
                            <span class="suggestions-label">Suggestions:</span>
                            ${interpretation.suggestions.map(s => 
                                `<span class="suggestion-chip" onclick="setQuery('${s.term}')">${s.term}</span>`
                            ).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function displayResults(containerId, results, isAIEnhanced) {
            const container = document.getElementById(containerId);
            
            if (results.length === 0) {
                container.innerHTML = '<p style="color: #7f8c8d; font-style: italic;">No results found</p>';
                return;
            }

            const resultHTML = results.map(item => `
                <div class="result-item ${isAIEnhanced ? 'ai-enhanced' : ''}">
                    <div class="item-name">${item.name}</div>
                    <div class="item-details">
                        ${item.metal} ‚Ä¢ ${item.type} ‚Ä¢ ${item.qty} √ó ${item.weight} oz
                    </div>
                </div>
            `).join('');

            container.innerHTML = resultHTML;
        }

        // Initialize demo
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ StackTrackr AI Search Demo Loaded');
            console.log('üì¶ Sample inventory loaded:', sampleInventory.length, 'items');
        });
    </script>
</body>
</html>
