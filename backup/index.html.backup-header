<!doctype html>
<!--
  StackrTrackr - Main Application Interface
  
  A comprehensive client-side web application for tracking precious metal investments
  including silver, gold, platinum, and palladium. Features include spot price management,
  premium calculations, collectable item handling, and multi-format data import/export.
  
  All data is stored locally using localStorage - no server required.
  Application version is managed dynamically via constants.js
-->
<html lang="en">
  <head>
    <!--
    Content Security Policy is intentionally relaxed to ensure
    local file execution when opening this tool with the file:// protocol.
    The previous strict policy blocked external scripts and prevented
    the interface from rendering. The simplified policy below permits
    all sources while keeping inline execution restrictions.
  -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;"
    />
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes"
      name="viewport"
    />

    <!-- Title is dynamically updated by init.js using APP_VERSION constant -->
    <title>StackrTrackr</title>
    <!-- FILE PROTOCOL COMPATIBILITY - MUST LOAD FIRST -->
    <script src="./js/file-protocol-fix.js"></script>

    <!-- External libraries for data import/export functionality -->
    <script
      defer=""
      src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"
    ></script>
    <script
      defer=""
      src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"
    ></script>
    <script
      defer=""
      src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
    ></script>
    <script
      defer=""
      src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"
    ></script>
    <!-- Chart.js for pie charts -->
    <script
      defer=""
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"
    ></script>
    <!-- JSZip for backup functionality -->
    <script
      defer=""
      src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"
    ></script>

    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="icon" type="image/svg+xml" href="./images/safe-favicon.svg" />
  </head>
  <body>
    <!-- Application Header -->
    <div class="app-header">
      <h1 class="app-logo" aria-label="StackrTrackr">
        <svg class="stackr-logo" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg" width="100%" height="auto">
          <defs>
            <!-- Light Mode Gradients -->
            <linearGradient id="goldLight" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#FFD700"/>
              <stop offset="30%" stop-color="#FFA500"/>
              <stop offset="70%" stop-color="#B8860B"/>
              <stop offset="100%" stop-color="#8B6914"/>
            </linearGradient>
            <linearGradient id="silverLight" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#F8F8FF"/>
              <stop offset="30%" stop-color="#E5E5E5"/>
              <stop offset="70%" stop-color="#C0C0C0"/>
              <stop offset="100%" stop-color="#A0A0A0"/>
            </linearGradient>
            <!-- Dark Mode Gradients -->
            <linearGradient id="goldDark" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#FFED4E"/>
              <stop offset="30%" stop-color="#FFD700"/>
              <stop offset="70%" stop-color="#FFA500"/>
              <stop offset="100%" stop-color="#CC8400"/>
            </linearGradient>
            <linearGradient id="silverDark" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#FFFFFF"/>
              <stop offset="30%" stop-color="#F5F5F5"/>
              <stop offset="70%" stop-color="#E0E0E0"/>
              <stop offset="100%" stop-color="#C0C0C0"/>
            </linearGradient>
            <!-- Drop Shadow Filter -->
            <filter id="dropShadow">
              <feDropShadow dx="3" dy="3" stdDeviation="2" flood-color="#000000" flood-opacity="0.3"/>
            </filter>
            <!-- Gold Glow Filter -->
            <filter id="goldGlow">
              <feGaussianBlur stdDeviation="2" result="blur"/>
              <feMerge>
                <feMergeNode in="blur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>
          <!-- Light Mode Group -->
          <g class="light-mode">
            <!-- Main title -->
            <g filter="url(#dropShadow)">
              <text x="50" y="80" font-family="Arial, sans-serif" font-size="72" font-weight="bold">
                <tspan fill="url(#silverLight)">Stackr</tspan><tspan fill="url(#goldLight)">Trackr</tspan>
              </text>
            </g>
            <!-- Tagline with glow -->
            <g filter="url(#goldGlow)">
              <text x="50" y="130" font-family="Arial, sans-serif" font-size="32" fill="#FFD700" opacity="0.6">Track Your Stack. Your Way.</text>
              <text x="50" y="130" font-family="Arial, sans-serif" font-size="32" fill="url(#silverLight)">Track Your Stack. Your Way.</text>
            </g>
          </g>
          <!-- Dark Mode Group -->
          <g class="dark-mode" style="display: none;">
            <!-- Main title -->
            <g filter="url(#dropShadow)">
              <text x="50" y="80" font-family="Arial, sans-serif" font-size="72" font-weight="bold">
                <tspan fill="url(#silverDark)">Stackr</tspan><tspan fill="url(#goldDark)">Trackr</tspan>
              </text>
            </g>
            <!-- Tagline with glow -->
            <g filter="url(#goldGlow)">
              <text x="50" y="130" font-family="Arial, sans-serif" font-size="32" fill="#FFED4E" opacity="0.7">Track Your Stack. Your Way.</text>
              <text x="50" y="130" font-family="Arial, sans-serif" font-size="32" fill="url(#silverDark)">Track Your Stack. Your Way.</text>
            </g>
          </g>
        </svg>
      </h1>
      <div style="margin-left: auto; display: flex; gap: 0.5rem">
        <button class="btn" id="aboutBtn" title="About" aria-label="About">
          About üìñ
        </button>
        <button class="btn" id="apiBtn" title="API" aria-label="API">
          API üîå
        </button>
        <!-- Community button commented out for revision
        <a
          class="btn"
          id="communityBtn"
          href="https://www.reddit.com/r/stackrtrackr/"
          target="_blank"
          rel="noopener"
          title="Community"
          aria-label="Community"
        >
          <img
            src="https://www.redditstatic.com/desktop2x/img/favicon/favicon-32x32.png"
            alt=""
            style="height: 1em; width: 1em"
          />
          Community
        </a>
        -->
        <button class="btn" id="filesBtn" title="Files" aria-label="Files">
          Files üìÅ
        </button>
        <button
          class="btn theme-btn"
          id="appearanceBtn"
          title="Theme"
          aria-label="Theme"
        ></button>
      </div>
    </div>