<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: spot.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: spot.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// SPOT PRICE FUNCTIONS
// =============================================================================

/**
 * Saves spot history to localStorage.
 * Writes the content of `spotHistory` to the `SPOT_HISTORY_KEY`.
 * @returns {void}
 */
const saveSpotHistory = () => {
  try {
    saveDataSync(SPOT_HISTORY_KEY, spotHistory);
  } catch (error) {
    console.error('Error saving spot history:', error);
  }
};

/**
 * Loads spot history from localStorage
 */
const loadSpotHistory = () => {
  try {
    const data = loadDataSync(SPOT_HISTORY_KEY, []);
    // Ensure data is an array
    spotHistory = Array.isArray(data) ? data : [];
  } catch (error) {
    console.error('Error loading spot history:', error);
    spotHistory = [];
  }
};

/**
 * One-time migration: re-tag old StakTrakr hourly backfill entries.
 * Before v3.30.02, backfill entries were stored with source:"api" (same as
 * live syncs). Identifies them by the heuristic: provider is "StakTrakr",
 * source is "api", and timestamp lands exactly on the hour (:00:00).
 * Regular syncs never produce on-the-hour timestamps.
 */
const migrateHourlySource = () => {
  const FLAG = "migration_hourlySource";
  try {
    if (localStorage.getItem(FLAG)) return;
    loadSpotHistory();
    let changed = 0;
    spotHistory.forEach(e => {
      if (
        e.provider === "StakTrakr" &amp;&amp;
        e.source === "api" &amp;&amp;
        typeof e.timestamp === "string" &amp;&amp;
        e.timestamp.endsWith(":00:00")
      ) {
        e.source = "api-hourly";
        changed++;
      }
    });
    if (changed > 0) {
      saveSpotHistory();
      console.log(`[Migration] Re-tagged ${changed} StakTrakr entries as api-hourly`);
    }
    localStorage.setItem(FLAG, "1");
  } catch (err) {
    console.warn("Hourly source migration failed:", err);
  }
};

// Run migration on script load
migrateHourlySource();

/**
 * Removes spot history entries older than the specified number of days
 *
 * @param {number} days - Number of days to retain
 */
const purgeSpotHistory = (days = 180) => {
  const cutoff = new Date();
  cutoff.setDate(cutoff.getDate() - days);
  spotHistory = spotHistory.filter(
    (entry) => new Date(entry.timestamp) >= cutoff,
  );
};

/**
 * Stores last cache refresh and API sync timestamps
 *
 * @param {string} source - Source of spot price ('api' or 'cached')
 * @param {string|null} provider - Provider name if available
 * @param {string} timestamp - ISO timestamp of the event
 */
const updateLastTimestamps = (source, provider, timestamp) => {
  const apiEntry = {
    provider: provider || "API",
    timestamp,
  };

  if (source === "api") {
    saveData(LAST_API_SYNC_KEY, apiEntry);
    saveData(LAST_CACHE_REFRESH_KEY, apiEntry);
  } else if (source === "cached") {
    const cacheEntry = {
      provider: provider ? `${provider} (cached)` : "Cached",
      timestamp,
    };
    saveData(LAST_CACHE_REFRESH_KEY, cacheEntry);
  }
};

/**
 * Records a new spot price entry in history
 *
 * @param {number} newSpot - New spot price value
 * @param {string} source - Source of spot price ('manual', 'api', etc.)
 * @param {string} metal - Metal type ('Silver', 'Gold', 'Platinum', or 'Palladium')
 * @param {string|null} provider - Provider name if source is API-based
 * @param {string|null} timestamp - Optional ISO timestamp for historical entries
 */
const recordSpot = (
  newSpot,
  source,
  metal,
  provider = null,
  timestamp = null,
) => {
  purgeSpotHistory();
  const entryTimestamp = timestamp
    ? new Date(timestamp).toISOString().replace("T", " ").slice(0, 19)
    : new Date().toISOString().replace("T", " ").slice(0, 19);

  // Historical backfill (explicit timestamp): full-array dedup by timestamp+metal.
  // Real-time entries (no explicit timestamp): fast O(1) tail check.
  const isDuplicate = timestamp
    ? spotHistory.some(
        (e) => e.timestamp === entryTimestamp &amp;&amp; e.metal === metal,
      )
    : spotHistory.length > 0 &amp;&amp;
      spotHistory[spotHistory.length - 1].spot === newSpot &amp;&amp;
      spotHistory[spotHistory.length - 1].metal === metal;

  if (!isDuplicate) {
    spotHistory.push({
      spot: newSpot,
      metal,
      source,
      provider,
      timestamp: entryTimestamp,
    });
  }
  if (source === "api" || source === "cached") {
    updateLastTimestamps(source, provider, entryTimestamp);
  }
  saveSpotHistory();
};

/**
 * Returns recent spot prices for a given metal from spotHistory.
 * Used by card-view sparklines (STAK-118).
 * @param {string} metal - Metal key ('silver', 'gold', etc.)
 * @param {number} [points=30] - Number of data points to return
 * @param {boolean} [withTimestamps=false] - If true, returns {ts, spot} objects
 * @returns {Array.&lt;number>|Array.&lt;{ts:number,spot:number}>|null} Array of spot prices, or null if insufficient data
 */
const getSpotHistoryForMetal = (metal, points = 30, withTimestamps = false) => {
  const metalName = Object.values(METALS).find(m => m.key === metal)?.name || metal;
  const entries = spotHistory.filter(e => e.metal === metalName);
  if (entries.length &lt; 2) return null;
  const recent = entries.slice(-points);
  if (withTimestamps) return recent.map(e => ({ ts: new Date(e.timestamp).getTime(), spot: e.spot }));
  return recent.map(e => e.spot);
};

/**
 * Updates spot card color based on price movement compared to last history entry
 *
 * @param {string} metalKey - Metal key ('silver', 'gold', etc.)
 * @param {number} newPrice - Newly set spot price
 */
const updateSpotCardColor = (metalKey, newPrice) => {
  const metalConfig = Object.values(METALS).find((m) => m.key === metalKey);
  if (!metalConfig) return;

  const el = elements.spotPriceDisplay[metalKey];
  if (!el) return;

  // Find the most recent API/manual entry with a DIFFERENT price.
  // This ensures the direction indicator persists across page refreshes —
  // cached reads reload the same price, so comparing against them (or against
  // the most recent same-price API entry) would always show "unchanged".
  const lastEntry = [...spotHistory]
    .reverse()
    .find((e) => e.metal === metalConfig.name &amp;&amp; e.source !== "cached" &amp;&amp; e.spot !== newPrice);

  let arrow = "";
  const formatted = typeof formatCurrency === "function"
    ? formatCurrency(newPrice)
    : newPrice.toFixed(2);

  if (!lastEntry) {
    el.classList.remove("spot-up", "spot-down", "spot-unchanged");
    el.textContent = formatted;
    return;
  }

  if (newPrice > lastEntry.spot) {
    el.classList.add("spot-up");
    el.classList.remove("spot-down", "spot-unchanged");
    arrow = "\u25B2"; // Up arrow
  } else if (newPrice &lt; lastEntry.spot) {
    el.classList.add("spot-down");
    el.classList.remove("spot-up", "spot-unchanged");
    arrow = "\u25BC"; // Down arrow
  } else {
    el.classList.add("spot-unchanged");
    el.classList.remove("spot-up", "spot-down");
    arrow = "=";
  }

  el.textContent = `${arrow} ${formatted}`.trim();
};

/**
 * Fetches and displays current spot prices from localStorage or defaults
 */
const fetchSpotPrice = () => {
  // Load spot prices for all metals
  Object.values(METALS).forEach((metalConfig) => {
    const storedSpot = localStorage.getItem(metalConfig.localStorageKey);
    if (storedSpot) {
      spotPrices[metalConfig.key] = parseFloat(storedSpot);
      if (
        elements.spotPriceDisplay[metalConfig.key] &amp;&amp;
        elements.spotPriceDisplay[metalConfig.key].textContent !== undefined
      ) {
        elements.spotPriceDisplay[metalConfig.key].textContent = formatCurrency(
          spotPrices[metalConfig.key],
        );
      }
    } else {
      // Use default price if no stored price
      const defaultPrice = metalConfig.defaultPrice;
      spotPrices[metalConfig.key] = defaultPrice;
      if (
        elements.spotPriceDisplay[metalConfig.key] &amp;&amp;
        elements.spotPriceDisplay[metalConfig.key].textContent !== undefined
      ) {
        elements.spotPriceDisplay[metalConfig.key].textContent = formatCurrency(
          spotPrices[metalConfig.key],
        );
      }
      // Don't record default prices in history automatically
    }

    // Update timestamp display
    const timestampElement = document.getElementById(
      `spotTimestamp${metalConfig.name}`,
    );
    if (timestampElement) {
      updateSpotTimestamp(metalConfig.name);
    }

    // Update card color based on price movement
    updateSpotCardColor(metalConfig.key, spotPrices[metalConfig.key]);
  });

  updateSummary();

  // Goldback estimation hook — fire after all spots loaded (STACK-52)
  if (typeof onGoldSpotPriceChanged === 'function') onGoldSpotPriceChanged();
};

/**
 * Updates spot price for specified metal from user input
 *
 * @param {string} metalKey - Key of metal to update ('silver', 'gold', 'platinum', 'palladium')
 */
const updateManualSpot = (metalKey) => {
  const metalConfig = Object.values(METALS).find((m) => m.key === metalKey);
  if (!metalConfig) return;

  const input = elements.userSpotPriceInput[metalKey];
  const value = input.value;

  if (!value) return;

  const num = parseFloat(value);
  if (isNaN(num) || num &lt;= 0)
    return alert(`Invalid ${metalConfig.name.toLowerCase()} spot price.`);

  localStorage.setItem(metalConfig.localStorageKey, num);
  spotPrices[metalKey] = num;

  if (
    elements.spotPriceDisplay[metalKey] &amp;&amp;
    elements.spotPriceDisplay[metalKey].textContent !== undefined
  ) {
    elements.spotPriceDisplay[metalKey].textContent = formatCurrency(
      spotPrices[metalKey],
    );
  }

  updateSpotCardColor(metalKey, num);
  recordSpot(num, "manual", metalConfig.name);

  // Update timestamp display
  const timestampElement = document.getElementById(
    `spotTimestamp${metalConfig.name}`,
  );
  if (timestampElement) {
    updateSpotTimestamp(metalConfig.name);
  }

  updateSummary();

  // Snapshot item prices after manual spot change (STACK-43)
  if (typeof recordAllItemPriceSnapshots === 'function') recordAllItemPriceSnapshots();

  // Goldback estimation hook (STACK-52)
  if (metalKey === 'gold' &amp;&amp; typeof onGoldSpotPriceChanged === 'function') onGoldSpotPriceChanged();

  // Clear the input and hide the manual input section if available
  input.value = "";
  if (typeof hideManualInput === "function") {
    hideManualInput(metalConfig.name);
  }
};

/**
 * Resets spot price for specified metal to default or API cached value
 *
 * @param {string} metalKey - Key of metal to reset ('silver', 'gold', 'platinum', 'palladium')
 */
const resetSpot = (metalKey) => {
  const metalConfig = Object.values(METALS).find((m) => m.key === metalKey);
  if (!metalConfig) return;

  let resetPrice = metalConfig.defaultPrice;
  let source = "default";
  let providerName = null;

  // If we have cached API data, use that instead
  if (
    typeof apiCache !== "undefined" &amp;&amp;
    apiCache &amp;&amp;
    apiCache.data &amp;&amp;
    apiCache.data[metalKey]
  ) {
    resetPrice = apiCache.data[metalKey];
    source = "api";
    providerName = API_PROVIDERS[apiCache.provider]?.name || null;
  }

  // Update price
  localStorage.setItem(metalConfig.localStorageKey, resetPrice.toString());
  spotPrices[metalKey] = resetPrice;

  // Update display
  if (
    elements.spotPriceDisplay[metalKey] &amp;&amp;
    elements.spotPriceDisplay[metalKey].textContent !== undefined
  ) {
    elements.spotPriceDisplay[metalKey].textContent = formatCurrency(
      spotPrices[metalKey],
    );
  }

  updateSpotCardColor(metalKey, resetPrice);

  // Record in history
  recordSpot(resetPrice, source, metalConfig.name, providerName);

  // Update timestamp display
  const timestampElement = document.getElementById(
    `spotTimestamp${metalConfig.name}`,
  );
  if (timestampElement) {
    updateSpotTimestamp(metalConfig.name);
  }

  // Update summary
  updateSummary();

  // Snapshot item prices after spot reset (STACK-43)
  if (typeof recordAllItemPriceSnapshots === 'function') recordAllItemPriceSnapshots();

  // Goldback estimation hook (STACK-52)
  if (metalKey === 'gold' &amp;&amp; typeof onGoldSpotPriceChanged === 'function') onGoldSpotPriceChanged();

  // Hide manual input if shown and function is available
  if (typeof hideManualInput === "function") {
    hideManualInput(metalConfig.name);
  }
};

/**
 * Alternative reset function that works with metal name instead of key
 * This provides compatibility with the API.js resetSpotPrice function
 *
 * @param {string} metalName - Name of metal to reset ('Silver', 'Gold', etc.)
 */
const resetSpotByName = (metalName) => {
  const metalConfig = Object.values(METALS).find((m) => m.name === metalName);
  if (metalConfig) {
    resetSpot(metalConfig.key);
  }
};

// =============================================================================
// SPARKLINE FUNCTIONS
// =============================================================================

/**
 * Returns the theme-aware color for a metal sparkline by reading the
 * CSS custom property (--silver, --gold, etc.) from the active theme.
 * Falls back to hardcoded defaults if getComputedStyle is unavailable.
 * @param {string} metalKey - 'silver', 'gold', 'platinum', 'palladium'
 * @returns {string} CSS color string
 */
const getMetalColor = (metalKey) => {
  const prop = getComputedStyle(document.documentElement).getPropertyValue(`--${metalKey}`).trim();
  if (prop) return prop;
  const fallback = { silver: "#d1d5db", gold: "#fbbf24", platinum: "#f3f4f6", palladium: "#d8b4fe" };
  return fallback[metalKey] || "#6366f1";
};

/**
 * Loads saved trend range preferences from localStorage
 * @returns {Object} Map of metal key → days (default 30)
 */
const loadTrendRanges = () => {
  try {
    const stored = loadDataSync(SPOT_TREND_RANGE_KEY, null);
    return stored &amp;&amp; typeof stored === "object" ? stored : {};
  } catch (e) {
    return {};
  }
};

/**
 * Saves a single metal's trend range preference
 * @param {string} metalKey - Metal key
 * @param {number} days - Number of days
 */
const saveTrendRange = (metalKey, days) => {
  const ranges = loadTrendRanges();
  ranges[metalKey] = days;
  saveDataSync(SPOT_TREND_RANGE_KEY, ranges);
};

// =============================================================================
// HISTORICAL DATA — YEAR-FILE FETCH &amp; CACHE (STACK-69)
// =============================================================================

/** @type {Map&lt;number, Array>} Cached year-file entries keyed by year */
const historicalDataCache = new Map();

/** @type {Map&lt;number, Promise&lt;Array>>} In-flight fetch promises to deduplicate concurrent requests */
const historicalFetchPromises = new Map();

/**
 * Calculates which year files are needed for a given lookback period.
 * @param {number} days - Number of days to look back
 * @returns {number[]} Array of year numbers to fetch
 */
const getRequiredYears = (days) => {
  const now = new Date();
  const cutoff = new Date(now);
  cutoff.setDate(cutoff.getDate() - days);
  const startYear = cutoff.getFullYear();
  const endYear = now.getFullYear();
  const years = [];
  for (let y = startYear; y &lt;= endYear; y++) {
    years.push(y);
  }
  return years;
};

/** @constant {string} Remote base URL for historical data (file:// fallback) */
const HISTORICAL_DATA_REMOTE = 'https://staktrakr.com/data/';

/**
 * Loads a local JSON file via XMLHttpRequest (sync-free).
 * Broader file:// compatibility than fetch() — works in Firefox/Safari
 * and Chrome with --allow-file-access-from-files.
 * @param {string} url - Relative or absolute URL to JSON file
 * @returns {Promise&lt;any>} Parsed JSON
 */
const xhrLoadJSON = (url) =>
  new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = () => {
      if (xhr.status === 200 || (xhr.status === 0 &amp;&amp; xhr.response)) {
        resolve(xhr.response);
      } else {
        reject(new Error(`XHR ${xhr.status}`));
      }
    };
    xhr.onerror = () => reject(new Error('XHR network error'));
    xhr.send();
  });

/**
 * Fetches a single year file from data/spot-history-{year}.json.
 * Three-tier loading: local fetch → local XHR → remote staktrakr.com.
 * Caches the result (or empty array on failure) to avoid retries.
 * Deduplicates concurrent fetches for the same year.
 * @param {number} year - Year to fetch
 * @returns {Promise&lt;Array>} Array of spot history entries
 */
const fetchYearFile = (year) => {
  // Already cached — return immediately
  if (historicalDataCache.has(year)) {
    return Promise.resolve(historicalDataCache.get(year));
  }

  // Already in-flight — return shared promise
  if (historicalFetchPromises.has(year)) {
    return historicalFetchPromises.get(year);
  }

  const filename = `spot-history-${year}.json`;
  const localUrl = `data/${filename}`;
  const remoteUrl = `${HISTORICAL_DATA_REMOTE}${filename}`;

  const promise = fetch(localUrl)
    .then((res) => {
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.json();
    })
    .catch(() => xhrLoadJSON(localUrl))       // Fallback 1: XHR for file://
    .catch(() => fetch(remoteUrl)             // Fallback 2: remote staktrakr.com
      .then((res) => {
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        return res.json();
      })
    )
    .then((entries) => {
      // Validate: must be an array of objects with spot/metal/timestamp
      if (!Array.isArray(entries)) {
        historicalDataCache.set(year, []);
        return [];
      }
      const valid = entries.filter(
        (e) => e &amp;&amp; typeof e.spot === "number" &amp;&amp; e.metal &amp;&amp; e.timestamp,
      );
      historicalDataCache.set(year, valid);
      return valid;
    })
    .catch(() => {
      // All three methods failed — cache empty to avoid retries
      historicalDataCache.set(year, []);
      return [];
    })
    .finally(() => {
      historicalFetchPromises.delete(year);
    });

  historicalFetchPromises.set(year, promise);
  return promise;
};

/**
 * Fetches needed year files, merges with live spotHistory, filters to
 * metal + range, deduplicates by day (live data wins over seed).
 * @param {string} metalName - Metal name ('Silver', 'Gold', etc.)
 * @param {number} days - Number of days to look back
 * @returns {Promise&lt;{ labels: string[], data: number[] }>} Arrays for Chart.js
 */
const getHistoricalSparklineData = async (metalName, days) => {
  const years = getRequiredYears(days);
  const yearArrays = await Promise.all(years.map(fetchYearFile));

  // Merge all historical entries
  const allHistorical = yearArrays.flat();

  // Cutoff date
  const cutoff = new Date();
  cutoff.setDate(cutoff.getDate() - days);

  // Combine: historical + live spotHistory
  const combined = [...allHistorical, ...spotHistory]
    .filter((e) => e.metal === metalName &amp;&amp; new Date(e.timestamp) >= cutoff)
    .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

  // Deduplicate by day — live data (non-seed) wins over seed
  const byDay = new Map();
  combined.forEach((e) => {
    const day = e.timestamp.slice(0, 10);
    const existing = byDay.get(day);
    if (!existing || existing.source === "seed") {
      byDay.set(day, e);
    }
  });

  const sorted = [...byDay.values()].sort(
    (a, b) => new Date(a.timestamp) - new Date(b.timestamp),
  );

  return {
    labels: sorted.map((e) => e.timestamp.slice(0, 10)),
    data: sorted.map((e) => e.spot),
  };
};

// =============================================================================

/**
 * Extracts sparkline data from spotHistory for a given metal and date range
 * @param {string} metalName - Metal name ('Silver', 'Gold', etc.)
 * @param {number} days - Number of days to look back
 * @param {boolean} [intraday=false] - If true, keep all entries (no per-day dedup)
 *   and use midnight cutoff instead of current-time offset (STACK-66)
 * @returns {{ labels: string[], data: number[] }} Arrays for Chart.js
 */
const getSparklineData = (metalName, days, intraday = false) => {
  const cutoff = new Date();
  if (intraday) {
    // Use midnight of N days ago for clean calendar-day boundaries
    cutoff.setDate(cutoff.getDate() - days);
    cutoff.setHours(0, 0, 0, 0);
  } else {
    cutoff.setDate(cutoff.getDate() - days);
  }

  const entries = spotHistory
    .filter((e) => e.metal === metalName &amp;&amp; new Date(e.timestamp) >= cutoff)
    .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

  if (intraday) {
    // Return individual entries for hourly resolution
    return {
      labels: entries.map((e) => e.timestamp.slice(11, 16)),  // "HH:MM"
      data: entries.map((e) => e.spot),
    };
  }

  // Track first and last entry per day for open/close comparison (STACK-92)
  const byDay = new Map();
  entries.forEach((e) => {
    const day = e.timestamp.slice(0, 10);
    if (!byDay.has(day)) {
      byDay.set(day, { first: e, last: e });
    } else {
      byDay.get(day).last = e;
    }
  });

  const sorted = [...byDay.values()].sort(
    (a, b) => new Date(a.last.timestamp) - new Date(b.last.timestamp),
  );

  return {
    labels: sorted.map((pair) => pair.last.timestamp.slice(0, 10)),
    data: sorted.map((pair) => pair.last.spot),       // close prices (backward-compatible)
    openData: sorted.map((pair) => pair.first.spot),   // open prices (STACK-92)
  };
};

/**
 * Renders or updates a sparkline chart for a single metal card.
 * For ranges >180 days, fetches historical year files asynchronously.
 * @param {string} metalKey - Metal key ('silver', 'gold', etc.)
 */
const updateSparkline = async (metalKey) => {
  const metalConfig = Object.values(METALS).find((m) => m.key === metalKey);
  if (!metalConfig) return;

  const canvasId = `sparkline${metalConfig.name}`;
  const canvas = document.getElementById(canvasId);
  if (!canvas || !canvas.getContext) return;

  // Destroy existing chart instance early to avoid stale visuals during async fetch
  if (sparklineInstances[metalKey]) {
    sparklineInstances[metalKey].destroy();
    sparklineInstances[metalKey] = null;
  }

  // Determine range from dropdown or saved preference
  const rangeSelect = document.getElementById(`spotRange${metalConfig.name}`);
  const days = rangeSelect ? parseInt(rangeSelect.value, 10) : 90;

  // 1-day view: try 1-day intraday window first, widen to 3 if too few points
  const isIntraday = (days === 1);
  let effectiveDays = isIntraday ? 1 : days;

  let labels, data;

  if (effectiveDays > 180) {
    // Historical range — async fetch year files (STACK-69)
    if (rangeSelect) rangeSelect.disabled = true;
    try {
      ({ labels, data } = await getHistoricalSparklineData(metalConfig.name, effectiveDays));
    } finally {
      if (rangeSelect) rangeSelect.disabled = false;
    }
  } else {
    ({ labels, data } = getSparklineData(metalConfig.name, effectiveDays, isIntraday));
  }

  // Adaptive fallback: if 1-day window has too few points, widen to 3 days
  if (isIntraday &amp;&amp; data.length &lt; 2) {
    ({ labels, data } = getSparklineData(metalConfig.name, 3, true));
  }

  // Need at least 2 data points for a meaningful line
  if (data.length &lt; 2) {
    updateSpotChangePercent(metalKey, data);
    return;
  }

  const ctx = canvas.getContext("2d");
  const color = getMetalColor(metalKey);

  // Create gradient fill
  const gradient = ctx.createLinearGradient(0, 0, 0, canvas.clientHeight || 80);
  gradient.addColorStop(0, color);
  gradient.addColorStop(1, "transparent");

  sparklineInstances[metalKey] = new Chart(ctx, {
    type: "line",
    data: {
      datasets: [
        {
          data: data.map((val, i) => ({ x: i, y: val })),
          borderColor: color,
          backgroundColor: gradient,
          fill: true,
          borderWidth: 1.5,
          pointRadius: 0,
          tension: isIntraday ? 0 : 0.3,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 6, right: 0, bottom: 0, left: 0 } },
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false },
      },
      scales: {
        x: {
          type: "linear",
          display: false,
          min: 0,
          max: data.length - 1,
        },
        y: { display: false, beginAtZero: false, grace: '50%' },
      },
      animation: { duration: 400 },
      interaction: { enabled: false },
    },
  });

  updateSpotChangePercent(metalKey, data);
};

/**
 * Computes 24h % change using the user's selected comparison mode (STACK-92).
 * Modes: close-close (default), open-open, open-close.
 * Graceful degradation: when only 1 entry/day exists, first === last so all modes match.
 * @param {string} metalName - 'Silver', 'Gold', etc.
 * @returns {{ pct: number, valid: boolean }}
 */
const get24hChange = (metalName) => {
  const mode = localStorage.getItem(SPOT_COMPARE_MODE_KEY) || 'close-close';
  const { data: closeData, openData } = getSparklineData(metalName, 3, false);

  if (closeData.length &lt; 2) return { pct: 0, valid: false };

  const yesterday = closeData.length - 2;
  const today = closeData.length - 1;
  let oldPrice, newPrice;

  switch (mode) {
    case 'open-open':
      oldPrice = openData[yesterday];
      newPrice = openData[today];
      break;
    case 'open-close':
      oldPrice = openData[yesterday];
      newPrice = closeData[today];
      break;
    default: // 'close-close'
      oldPrice = closeData[yesterday];
      newPrice = closeData[today];
      break;
  }

  if (!oldPrice || oldPrice === 0) return { pct: 0, valid: false };
  return { pct: ((newPrice - oldPrice) / oldPrice) * 100, valid: true };
};

/**
 * Computes and displays % change on a spot card based on the selected sparkline period.
 * Compares oldest vs newest data point in the selected range.
 *
 * @param {string} metalKey - Metal key ('silver', 'gold', etc.)
 * @param {number[]|null} [precomputedData=null] - Pre-fetched data array from updateSparkline
 *   (avoids redundant re-fetch for historical ranges). When null, uses sync getSparklineData().
 */
const updateSpotChangePercent = (metalKey, precomputedData = null) => {
  const metalConfig = Object.values(METALS).find((m) => m.key === metalKey);
  if (!metalConfig) return;
  const el = document.getElementById(`spotChange${metalConfig.name}`);
  if (!el) return;

  const rangeSelectEl0 = document.getElementById(`spotRange${metalConfig.name}`);
  const selectedDays0 = rangeSelectEl0 ? parseInt(rangeSelectEl0.value, 10) : 90;

  let data;
  if (selectedDays0 === 1) {
    // 1-day view: use get24hChange() which respects the user's comparison mode (STACK-92)
    ({ data } = getSparklineData(metalConfig.name, 3, false));
  } else if (precomputedData) {
    data = precomputedData;
  } else {
    ({ data } = getSparklineData(metalConfig.name, selectedDays0));
  }

  if (data.length &lt; 2) {
    el.textContent = "";
    return;
  }

  // For 1d view, use get24hChange() for mode-aware comparison (STACK-92).
  // For all other views, compare oldest→newest across the full selected range.
  let pctChange;
  if (selectedDays0 === 1) {
    const change24h = get24hChange(metalConfig.name);
    pctChange = change24h.valid ? change24h.pct : 0;
  } else {
    const oldest = data[0];
    const newest = data[data.length - 1];
    pctChange = ((newest - oldest) / oldest) * 100;
  }
  const sign = pctChange > 0 ? "+" : "";
  const rangeClass = pctChange > 0 ? "spot-change-up" : pctChange &lt; 0 ? "spot-change-down" : "";

  // Build DOM: range % (colored) + optional 24h % (independently colored)
  el.className = "spot-card-change";
  el.textContent = "";

  const rangeSpan = document.createElement("span");
  rangeSpan.className = rangeClass;
  rangeSpan.textContent = `${sign}${pctChange.toFixed(2)}%`;
  el.appendChild(rangeSpan);

  // Append secondary % indicator in parentheses (STACK-69, STACK-92)
  // >1d views: show 24h change (mode-aware) | 1d view: show 90d change for context
  if (selectedDays0 > 1) {
    const change24h = get24hChange(metalConfig.name);
    if (change24h.valid) {
      const dayPct = change24h.pct;
      const daySign = dayPct > 0 ? "+" : "";
      const dayClass = dayPct > 0 ? "spot-change-up" : dayPct &lt; 0 ? "spot-change-down" : "";

      const daySpan = document.createElement("span");
      daySpan.className = dayClass;
      daySpan.textContent = ` (${daySign}${dayPct.toFixed(2)}% 24h)`;
      el.appendChild(daySpan);
    }
  } else {
    // 1d view: show 90d context
    const { data: ctx90 } = getSparklineData(metalConfig.name, 90);
    if (ctx90.length >= 2) {
      const ctxOld = ctx90[0];
      const ctxNew = ctx90[ctx90.length - 1];
      const ctxPct = ((ctxNew - ctxOld) / ctxOld) * 100;
      const ctxSign = ctxPct > 0 ? "+" : "";
      const ctxClass = ctxPct > 0 ? "spot-change-up" : ctxPct &lt; 0 ? "spot-change-down" : "";

      const ctxSpan = document.createElement("span");
      ctxSpan.className = ctxClass;
      ctxSpan.textContent = ` (${ctxSign}${ctxPct.toFixed(2)}% 90d)`;
      el.appendChild(ctxSpan);
    }
  }

  // Override the arrow direction on the price display to match the period-based
  // trend. updateSpotCardColor() compares against the last different price in ALL
  // history, but the user expects the arrow to reflect the selected period.
  const priceEl = elements.spotPriceDisplay[metalKey];
  if (priceEl) {
    const currentPrice = spotPrices[metalKey];
    const formatted =
      typeof formatCurrency === "function"
        ? formatCurrency(currentPrice)
        : currentPrice.toFixed(2);

    if (pctChange > 0) {
      priceEl.classList.add("spot-up");
      priceEl.classList.remove("spot-down", "spot-unchanged");
      priceEl.textContent = `\u25B2 ${formatted}`;
    } else if (pctChange &lt; 0) {
      priceEl.classList.add("spot-down");
      priceEl.classList.remove("spot-up", "spot-unchanged");
      priceEl.textContent = `\u25BC ${formatted}`;
    } else {
      priceEl.classList.add("spot-unchanged");
      priceEl.classList.remove("spot-up", "spot-down");
      priceEl.textContent = `= ${formatted}`;
    }
  }
};

/**
 * Refreshes sparklines on all 4 metal cards concurrently
 */
const updateAllSparklines = async () => {
  await Promise.all(Object.values(METALS).map((mc) => updateSparkline(mc.key)));
};

/**
 * Destroys all sparkline Chart.js instances (cleanup)
 */
const destroySparklines = () => {
  Object.keys(sparklineInstances).forEach((key) => {
    if (sparklineInstances[key]) {
      sparklineInstances[key].destroy();
      sparklineInstances[key] = null;
    }
  });
};

/**
 * Opens an inline input on a spot card price for manual editing (shift+click)
 * @param {HTMLElement} valueEl - The .spot-card-value element that was clicked
 * @param {string} metalKey - Metal key ('silver', 'gold', etc.)
 */
const startSpotInlineEdit = (valueEl, metalKey) => {
  if (valueEl.querySelector(".spot-inline-input")) return; // already editing

  const metalConfig = Object.values(METALS).find((m) => m.key === metalKey);
  if (!metalConfig) return;

  const currentPrice = spotPrices[metalKey] || 0;
  const originalHTML = valueEl.innerHTML;

  const input = document.createElement("input");
  input.type = "number";
  input.className = "spot-inline-input";
  input.value = currentPrice > 0 ? currentPrice.toFixed(2) : "";
  input.step = "0.01";
  input.min = "0";

  valueEl.textContent = "";
  valueEl.appendChild(input);
  input.focus();
  input.select();

  const cancel = () => {
    // nosemgrep: javascript.browser.security.insecure-innerhtml.insecure-innerhtml, javascript.browser.security.insecure-document-method.insecure-document-method
    valueEl.innerHTML = originalHTML;
  };

  const save = () => {
    const num = parseFloat(input.value);
    if (isNaN(num) || num &lt;= 0) {
      cancel();
      return;
    }

    localStorage.setItem(metalConfig.localStorageKey, num);
    spotPrices[metalKey] = num;
    valueEl.textContent = formatCurrency(num);
    updateSpotCardColor(metalKey, num);
    recordSpot(num, "manual", metalConfig.name);
    updateSpotTimestamp(metalConfig.name);
    updateSummary();
    updateSparkline(metalKey);

    // Snapshot item prices after inline spot edit (STACK-43)
    if (typeof recordAllItemPriceSnapshots === 'function') recordAllItemPriceSnapshots();

    // Goldback estimation hook (STACK-52)
    if (metalKey === 'gold' &amp;&amp; typeof onGoldSpotPriceChanged === 'function') onGoldSpotPriceChanged();
  };

  input.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      save();
    } else if (e.key === "Escape") {
      e.preventDefault();
      cancel();
    }
  });

  input.addEventListener("blur", cancel);
};

// =============================================================================
// SPOT HISTORY — SETTINGS LOG TABLE
// =============================================================================

/** @type {string} Current sort column for settings spot history table */
let settingsSpotSortColumn = '';
/** @type {boolean} Sort ascending for settings spot history table */
let settingsSpotSortAsc = true;

/**
 * Renders the spot price history table in the Settings > Activity Log > Metals sub-tab.
 * Reads from the global spotHistory array and sorts by timestamp descending by default.
 */
const renderSpotHistoryTable = () => {
  const table = document.getElementById('settingsSpotHistoryTable');
  if (!table) return;

  loadSpotHistory();
  let data = [...spotHistory];

  // Sort
  if (settingsSpotSortColumn) {
    data.sort((a, b) => {
      const valA = a[settingsSpotSortColumn];
      const valB = b[settingsSpotSortColumn];
      if (valA &lt; valB) return settingsSpotSortAsc ? -1 : 1;
      if (valA > valB) return settingsSpotSortAsc ? 1 : -1;
      return 0;
    });
  } else {
    data.sort((a, b) => (a.timestamp &lt; b.timestamp ? 1 : -1));
  }

  const tbody = table.querySelector('tbody');
  if (!tbody) return;

  if (data.length === 0) {
    // nosemgrep: javascript.browser.security.insecure-innerhtml.insecure-innerhtml
    tbody.innerHTML = '&lt;tr class="settings-log-empty">&lt;td colspan="5">No spot price history recorded yet.&lt;/td>&lt;/tr>';
    return;
  }

  const rows = data.map(e => {
    const ts = e.timestamp ? (typeof formatTimestamp === 'function' ? formatTimestamp(e.timestamp) : new Date(e.timestamp).toLocaleString()) : '';
    const metal = e.metal || '';
    const price = typeof formatCurrency === 'function' ? formatCurrency(e.spot) : `$${Number(e.spot).toFixed(2)}`;
    const source = e.source || '';
    const provider = e.source === 'seed' ? 'Seed' : (e.provider || '');
    return `&lt;tr>&lt;td>${ts}&lt;/td>&lt;td>${escapeHtml(metal)}&lt;/td>&lt;td>${price}&lt;/td>&lt;td>${escapeHtml(source)}&lt;/td>&lt;td>${escapeHtml(provider)}&lt;/td>&lt;/tr>`;
  });

  // nosemgrep: javascript.browser.security.insecure-innerhtml.insecure-innerhtml
  tbody.innerHTML = rows.join('');

  // Sortable headers
  table.querySelectorAll('th').forEach(th => {
    th.style.cursor = 'pointer';
    th.onclick = () => {
      const cols = ['timestamp', 'metal', 'spot', 'source', 'provider'];
      const idx = Array.from(th.parentNode.children).indexOf(th);
      const col = cols[idx];
      if (settingsSpotSortColumn === col) {
        settingsSpotSortAsc = !settingsSpotSortAsc;
      } else {
        settingsSpotSortColumn = col;
        settingsSpotSortAsc = true;
      }
      renderSpotHistoryTable();
    };
  });
};

/** @type {string} Current sort column for settings LBMA reference table */
let settingsLbmaSortColumn = '';
/** @type {boolean} Sort ascending for settings LBMA reference table */
let settingsLbmaSortAsc = true;
/** @type {Array&lt;Object>|null} Cached LBMA reference entries */
let settingsLbmaReferenceCache = null;
/** @type {Promise&lt;Array&lt;Object>>|null} In-flight LBMA load promise */
let settingsLbmaLoadPromise = null;
/** @type {boolean} Prevent duplicate LBMA control binding */
let settingsLbmaControlsBound = false;

/**
 * Returns the seed years configured for bundled LBMA reference data.
 * Falls back to current year when the seed config is unavailable.
 *
 * @returns {number[]} Sorted list of years
 */
const getLbmaReferenceYears = () => {
  if (typeof SEED_DATA_YEARS !== 'undefined' &amp;&amp; Array.isArray(SEED_DATA_YEARS) &amp;&amp; SEED_DATA_YEARS.length > 0) {
    return [...new Set(
      SEED_DATA_YEARS
        .map((y) => parseInt(y, 10))
        .filter((y) => Number.isFinite(y))
    )].sort((a, b) => a - b);
  }
  return [new Date().getFullYear()];
};

/**
 * Loads and caches LBMA reference entries from yearly seed files.
 * Uses fetchYearFile() for file:// and HTTP compatibility.
 *
 * @returns {Promise&lt;Array&lt;Object>>} Flattened LBMA reference entries
 */
const loadLbmaReferenceEntries = async () => {
  if (Array.isArray(settingsLbmaReferenceCache)) return settingsLbmaReferenceCache;
  if (settingsLbmaLoadPromise) return settingsLbmaLoadPromise;

  settingsLbmaLoadPromise = Promise.all(getLbmaReferenceYears().map(fetchYearFile))
    .then((yearArrays) => {
      let entries = yearArrays
        .flat()
        .filter((e) => e &amp;&amp; typeof e.spot === 'number' &amp;&amp; e.metal &amp;&amp; e.timestamp)
        .filter((e) => e.source === 'seed' || String(e.provider || '').toUpperCase() === 'LBMA');

      // Final fallback for unusual file:// cases where year files fail entirely.
      if (entries.length === 0 &amp;&amp; typeof getEmbeddedSeedData === 'function') {
        entries = getEmbeddedSeedData().filter(
          (e) => e &amp;&amp; typeof e.spot === 'number' &amp;&amp; e.metal &amp;&amp; e.timestamp
        );
      }

      settingsLbmaReferenceCache = entries.map((e) => ({
        ...e,
        provider: e.provider || 'LBMA',
      }));
      return settingsLbmaReferenceCache;
    })
    .catch(() => {
      settingsLbmaReferenceCache = [];
      return settingsLbmaReferenceCache;
    })
    .finally(() => {
      settingsLbmaLoadPromise = null;
    });

  return settingsLbmaLoadPromise;
};

/**
 * Binds LBMA history filter controls once.
 */
const bindLbmaHistoryControls = () => {
  if (settingsLbmaControlsBound) return;

  const metalFilter = document.getElementById('settingsLbmaMetalFilter');
  const startDate = document.getElementById('settingsLbmaStartDate');
  const endDate = document.getElementById('settingsLbmaEndDate');
  const resetBtn = document.getElementById('settingsLbmaResetBtn');
  if (!metalFilter || !startDate || !endDate || !resetBtn) return;

  const rerender = () => {
    renderLbmaHistoryTable();
  };

  metalFilter.addEventListener('change', rerender);
  startDate.addEventListener('change', rerender);
  endDate.addEventListener('change', rerender);
  resetBtn.addEventListener('click', () => {
    metalFilter.value = 'all';
    startDate.value = '';
    endDate.value = '';
    renderLbmaHistoryTable();
  });

  settingsLbmaControlsBound = true;
};

/**
 * Renders the Settings > Activity Log > LBMA History reference table.
 * Data source is bundled year files (seed reference data), not user spotHistory.
 */
const renderLbmaHistoryTable = async () => {
  const table = document.getElementById('settingsLbmaHistoryTable');
  if (!table) return;
  bindLbmaHistoryControls();

  const tbody = table.querySelector('tbody');
  if (!tbody) return;

  const resultCountEl = document.getElementById('settingsLbmaResultCount');
  // nosemgrep: javascript.browser.security.insecure-innerhtml.insecure-innerhtml
  tbody.innerHTML = '&lt;tr class="settings-log-empty">&lt;td colspan="4">Loading LBMA reference history…&lt;/td>&lt;/tr>';

  const allEntries = await loadLbmaReferenceEntries();
  const metalFilter = (document.getElementById('settingsLbmaMetalFilter')?.value || 'all').toLowerCase();
  const startDate = document.getElementById('settingsLbmaStartDate')?.value || '';
  const endDate = document.getElementById('settingsLbmaEndDate')?.value || '';

  let data = [...allEntries];

  if (metalFilter !== 'all') {
    data = data.filter((e) => String(e.metal || '').toLowerCase() === metalFilter);
  }
  if (startDate) {
    data = data.filter((e) => String(e.timestamp || '').slice(0, 10) >= startDate);
  }
  if (endDate) {
    data = data.filter((e) => String(e.timestamp || '').slice(0, 10) &lt;= endDate);
  }

  if (settingsLbmaSortColumn) {
    data.sort((a, b) => {
      const getSortVal = (entry) => {
        if (settingsLbmaSortColumn === 'spot') return Number(entry.spot) || 0;
        if (settingsLbmaSortColumn === 'metal') return String(entry.metal || '').toLowerCase();
        if (settingsLbmaSortColumn === 'provider') return String(entry.provider || '').toLowerCase();
        return String(entry.timestamp || '');
      };
      const valA = getSortVal(a);
      const valB = getSortVal(b);
      if (valA &lt; valB) return settingsLbmaSortAsc ? -1 : 1;
      if (valA > valB) return settingsLbmaSortAsc ? 1 : -1;
      return 0;
    });
  } else {
    data.sort((a, b) => (a.timestamp &lt; b.timestamp ? 1 : -1));
  }

  if (resultCountEl) {
    resultCountEl.textContent = `${data.length.toLocaleString()} rows`;
  }

  if (data.length === 0) {
    // nosemgrep: javascript.browser.security.insecure-innerhtml.insecure-innerhtml
    tbody.innerHTML = '&lt;tr class="settings-log-empty">&lt;td colspan="4">No LBMA reference rows match the current filters.&lt;/td>&lt;/tr>';
  } else {
    const rows = data.map((entry) => {
      const rawDate = String(entry.timestamp || '').slice(0, 10);
      const dateLabel = rawDate
        ? (typeof formatDisplayDate === 'function' ? formatDisplayDate(rawDate) : rawDate)
        : '';
      const metal = escapeHtml(entry.metal || '');
      const spot = typeof formatCurrency === 'function'
        ? formatCurrency(entry.spot)
        : `$${Number(entry.spot).toFixed(2)}`;
      const provider = escapeHtml(entry.provider || 'LBMA');
      return `&lt;tr>&lt;td>${dateLabel}&lt;/td>&lt;td>${metal}&lt;/td>&lt;td>${spot}&lt;/td>&lt;td>${provider}&lt;/td>&lt;/tr>`;
    });
    // nosemgrep: javascript.browser.security.insecure-innerhtml.insecure-innerhtml
    tbody.innerHTML = rows.join('');
  }

  table.querySelectorAll('th').forEach((th, idx) => {
    th.style.cursor = 'pointer';
    th.onclick = () => {
      const cols = ['date', 'metal', 'spot', 'provider'];
      const nextCol = cols[idx];
      if (settingsLbmaSortColumn === nextCol) {
        settingsLbmaSortAsc = !settingsLbmaSortAsc;
      } else {
        settingsLbmaSortColumn = nextCol;
        settingsLbmaSortAsc = true;
      }
      renderLbmaHistoryTable();
    };
  });
};

/**
 * Clears all spot price history after user confirmation.
 */
const clearSpotHistory = () => {
  if (!confirm('Clear all spot price history? This cannot be undone.')) return;
  spotHistory = [];
  saveSpotHistory();
  // Reset rendered flag so it re-renders fresh
  const panel = document.getElementById('logPanel_metals');
  if (panel) delete panel.dataset.rendered;
  renderSpotHistoryTable();
};

// =============================================================================

// ---------------------------------------------------------------------------
// Seed bundle loader (file:// protocol support)
// ---------------------------------------------------------------------------
// data/spot-history-bundle.js calls this function on load.
// Compact format: { year: { metal: [[MM-DD, price], ...] } }
// Expands into full historicalDataCache entries so fetchYearFile() finds
// cached data immediately without network requests.
/**
 * Loads the spot history seed bundle into the cache.
 * @param {Object} bundle - The spot history seed bundle.
 */
window._loadSpotSeedBundle = function(bundle) {
  let loaded = 0;
  for (const yearStr of Object.keys(bundle)) {
    const year = parseInt(yearStr, 10);
    if (historicalDataCache.has(year) &amp;&amp; historicalDataCache.get(year).length > 0) continue;
    const metals = bundle[yearStr];
    const entries = [];
    for (const metal of Object.keys(metals)) {
      for (const pair of metals[metal]) {
        entries.push({
          spot: pair[1],
          metal: metal,
          source: 'seed',
          provider: 'LBMA',
          timestamp: yearStr + '-' + pair[0] + ' 12:00:00'
        });
      }
    }
    historicalDataCache.set(year, entries);
    loaded += entries.length;
  }
  if (loaded > 0) {
    console.log('[SpotSeed] Loaded ' + loaded + ' entries from bundle (' + Object.keys(bundle).length + ' years)');
  }
};

// Ensure global availability
window.fetchSpotPrice = fetchSpotPrice;
window.updateSpotCardColor = updateSpotCardColor;
window.updateSparkline = updateSparkline;
window.updateAllSparklines = updateAllSparklines;
window.destroySparklines = destroySparklines;
window.updateSpotChangePercent = updateSpotChangePercent;
window.startSpotInlineEdit = startSpotInlineEdit;
window.getMetalColor = getMetalColor;
window.loadTrendRanges = loadTrendRanges;
window.saveTrendRange = saveTrendRange;
window.renderSpotHistoryTable = renderSpotHistoryTable;
window.renderLbmaHistoryTable = renderLbmaHistoryTable;
window.clearSpotHistory = clearSpotHistory;
window.getHistoricalSparklineData = getHistoricalSparklineData;
window.getRequiredYears = getRequiredYears;
window.fetchYearFile = fetchYearFile;
window.historicalDataCache = historicalDataCache;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CatalogAPI.html">CatalogAPI</a></li><li><a href="CatalogConfig.html">CatalogConfig</a></li><li><a href="CatalogManager.html">CatalogManager</a></li><li><a href="CatalogProvider.html">CatalogProvider</a></li><li><a href="FeatureFlags.html">FeatureFlags</a></li><li><a href="ImageCache.html">ImageCache</a></li><li><a href="ImageProcessor.html">ImageProcessor</a></li><li><a href="LocalProvider.html">LocalProvider</a></li><li><a href="NumistaCatalogProvider.html">NumistaCatalogProvider</a></li><li><a href="NumistaProvider.html">NumistaProvider</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ACK_DISMISSED_KEY">ACK_DISMISSED_KEY</a></li><li><a href="global.html#API_CACHE_KEY">API_CACHE_KEY</a></li><li><a href="global.html#API_KEY_STORAGE_KEY">API_KEY_STORAGE_KEY</a></li><li><a href="global.html#API_PROVIDERS">API_PROVIDERS</a></li><li><a href="global.html#APP_VERSION">APP_VERSION</a></li><li><a href="global.html#APP_VERSION_KEY">APP_VERSION_KEY</a></li><li><a href="global.html#AUTOCOMPLETE_CONFIG">AUTOCOMPLETE_CONFIG</a></li><li><a href="global.html#BRANDING_DOMAIN_OPTIONS">BRANDING_DOMAIN_OPTIONS</a></li><li><a href="global.html#BRANDING_DOMAIN_OVERRIDE">BRANDING_DOMAIN_OVERRIDE</a></li><li><a href="global.html#BRANDING_TITLE">BRANDING_TITLE</a></li><li><a href="global.html#CARD_STYLE_KEY">CARD_STYLE_KEY</a></li><li><a href="global.html#CATALOG_HISTORY_KEY">CATALOG_HISTORY_KEY</a></li><li><a href="global.html#CATALOG_MAP_KEY">CATALOG_MAP_KEY</a></li><li><a href="global.html#CERT_LOOKUP_URLS">CERT_LOOKUP_URLS</a></li><li><a href="global.html#CLOUD_PROVIDERS">CLOUD_PROVIDERS</a></li><li><a href="global.html#DEBUG">DEBUG</a></li><li><a href="global.html#DEFAULT_API_CACHE_DURATION">DEFAULT_API_CACHE_DURATION</a></li><li><a href="global.html#DEFAULT_API_QUOTA">DEFAULT_API_QUOTA</a></li><li><a href="global.html#DEFAULT_CURRENCY">DEFAULT_CURRENCY</a></li><li><a href="global.html#DEFAULT_SORT_COL_KEY">DEFAULT_SORT_COL_KEY</a></li><li><a href="global.html#DEFAULT_SORT_DIR_KEY">DEFAULT_SORT_DIR_KEY</a></li><li><a href="global.html#DESKTOP_CARD_VIEW_KEY">DESKTOP_CARD_VIEW_KEY</a></li><li><a href="global.html#DEV_MODE">DEV_MODE</a></li><li><a href="global.html#DISPLAY_CURRENCY_KEY">DISPLAY_CURRENCY_KEY</a></li><li><a href="global.html#EXCHANGE_RATES_KEY">EXCHANGE_RATES_KEY</a></li><li><a href="global.html#EXCHANGE_RATE_API_URL">EXCHANGE_RATE_API_URL</a></li><li><a href="global.html#FALLBACK_EXCHANGE_RATES">FALLBACK_EXCHANGE_RATES</a></li><li><a href="global.html#FEATURE_FLAGS">FEATURE_FLAGS</a></li><li><a href="global.html#FEATURE_FLAGS_KEY">FEATURE_FLAGS_KEY</a></li><li><a href="global.html#FIELD_COERCIONS">FIELD_COERCIONS</a></li><li><a href="global.html#FILTER_CHIP_CATEGORY_DEFAULTS">FILTER_CHIP_CATEGORY_DEFAULTS</a></li><li><a href="global.html#GB_ESTIMATE_MODIFIER_KEY">GB_ESTIMATE_MODIFIER_KEY</a></li><li><a href="global.html#GB_ESTIMATE_PREMIUM">GB_ESTIMATE_PREMIUM</a></li><li><a href="global.html#GB_TO_OZT">GB_TO_OZT</a></li><li><a href="global.html#GITHUB_RELEASES_URL">GITHUB_RELEASES_URL</a></li><li><a href="global.html#GOLDBACK_DENOMINATIONS">GOLDBACK_DENOMINATIONS</a></li><li><a href="global.html#GOLDBACK_ENABLED_KEY">GOLDBACK_ENABLED_KEY</a></li><li><a href="global.html#GOLDBACK_ESTIMATE_ENABLED_KEY">GOLDBACK_ESTIMATE_ENABLED_KEY</a></li><li><a href="global.html#GOLDBACK_PRICES_KEY">GOLDBACK_PRICES_KEY</a></li><li><a href="global.html#GOLDBACK_PRICE_HISTORY_KEY">GOLDBACK_PRICE_HISTORY_KEY</a></li><li><a href="global.html#HEADER_SYNC_BTN_KEY">HEADER_SYNC_BTN_KEY</a></li><li><a href="global.html#HEADER_TREND_BTN_KEY">HEADER_TREND_BTN_KEY</a></li><li><a href="global.html#IMAGE_MAX_BYTES">IMAGE_MAX_BYTES</a></li><li><a href="global.html#IMAGE_MAX_DIM">IMAGE_MAX_DIM</a></li><li><a href="global.html#IMAGE_QUALITY">IMAGE_QUALITY</a></li><li><a href="global.html#INLINE_CHIP_DEFAULTS">INLINE_CHIP_DEFAULTS</a></li><li><a href="global.html#ITEMS_PER_PAGE_KEY">ITEMS_PER_PAGE_KEY</a></li><li><a href="global.html#ITEM_PRICE_HISTORY_KEY">ITEM_PRICE_HISTORY_KEY</a></li><li><a href="global.html#ITEM_TAGS_KEY">ITEM_TAGS_KEY</a></li><li><a href="global.html#LAST_API_SYNC_KEY">LAST_API_SYNC_KEY</a></li><li><a href="global.html#LAST_CACHE_REFRESH_KEY">LAST_CACHE_REFRESH_KEY</a></li><li><a href="global.html#LAST_VERSION_CHECK_KEY">LAST_VERSION_CHECK_KEY</a></li><li><a href="global.html#LATEST_REMOTE_URL_KEY">LATEST_REMOTE_URL_KEY</a></li><li><a href="global.html#LATEST_REMOTE_VERSION_KEY">LATEST_REMOTE_VERSION_KEY</a></li><li><a href="global.html#LAYOUT_SECTION_DEFAULTS">LAYOUT_SECTION_DEFAULTS</a></li><li><a href="global.html#LOG_TAB_RENDERERS">LOG_TAB_RENDERERS</a></li><li><a href="global.html#LS_KEY">LS_KEY</a></li><li><a href="global.html#MAX_LOCAL_FILE_SIZE">MAX_LOCAL_FILE_SIZE</a></li><li><a href="global.html#MAX_TAGS_PER_ITEM">MAX_TAGS_PER_ITEM</a></li><li><a href="global.html#MAX_TAG_LENGTH">MAX_TAG_LENGTH</a></li><li><a href="global.html#METALS">METALS</a></li><li><a href="global.html#METAL_COLORS">METAL_COLORS</a></li><li><a href="global.html#METAL_ORDER_KEY">METAL_ORDER_KEY</a></li><li><a href="global.html#METAL_SYMBOLS">METAL_SYMBOLS</a></li><li><a href="global.html#NUMISTA_VIEW_FIELD_DEFAULTS">NUMISTA_VIEW_FIELD_DEFAULTS</a></li><li><a href="global.html#NumistaLookup">NumistaLookup</a></li><li><a href="global.html#PREBUILT_LOOKUP_DATA">PREBUILT_LOOKUP_DATA</a></li><li><a href="global.html#PRICE_HISTORY_COLS">PRICE_HISTORY_COLS</a></li><li><a href="global.html#Remote">Remote</a></li><li><a href="global.html#SEED_CUSTOM_RULES">SEED_CUSTOM_RULES</a></li><li><a href="global.html#SEED_DATA_YEARS">SEED_DATA_YEARS</a></li><li><a href="global.html#SEED_IMAGES_VERSION">SEED_IMAGES_VERSION</a></li><li><a href="global.html#SEED_INVENTORY_ITEMS">SEED_INVENTORY_ITEMS</a></li><li><a href="global.html#SERIAL_KEY">SERIAL_KEY</a></li><li><a href="global.html#SPOT_COMPARE_MODE_KEY">SPOT_COMPARE_MODE_KEY</a></li><li><a href="global.html#SPOT_HISTORY_KEY">SPOT_HISTORY_KEY</a></li><li><a href="global.html#SPOT_TREND_KEY">SPOT_TREND_KEY</a></li><li><a href="global.html#SPOT_TREND_RANGE_KEY">SPOT_TREND_RANGE_KEY</a></li><li><a href="global.html#STORAGE_KEY_LABELS">STORAGE_KEY_LABELS</a></li><li><a href="global.html#STORAGE_TINY_THRESHOLD_KB">STORAGE_TINY_THRESHOLD_KB</a></li><li><a href="global.html#SUPPORTED_CURRENCIES">SUPPORTED_CURRENCIES</a></li><li><a href="global.html#SYNC_FILE_PATH">SYNC_FILE_PATH</a></li><li><a href="global.html#SYNC_META_PATH">SYNC_META_PATH</a></li><li><a href="global.html#SYNC_POLL_INTERVAL">SYNC_POLL_INTERVAL</a></li><li><a href="global.html#SYNC_PUSH_DEBOUNCE">SYNC_PUSH_DEBOUNCE</a></li><li><a href="global.html#SYNC_SCOPE_KEYS">SYNC_SCOPE_KEYS</a></li><li><a href="global.html#THEME_KEY">THEME_KEY</a></li><li><a href="global.html#TIMEZONE_KEY">TIMEZONE_KEY</a></li><li><a href="global.html#TREND_PRESETS">TREND_PRESETS</a></li><li><a href="global.html#VALID_TYPES">VALID_TYPES</a></li><li><a href="global.html#VAULT_FILE_EXTENSION">VAULT_FILE_EXTENSION</a></li><li><a href="global.html#VERSION_ACK_KEY">VERSION_ACK_KEY</a></li><li><a href="global.html#VERSION_CHECK_TTL">VERSION_CHECK_TTL</a></li><li><a href="global.html#VERSION_CHECK_URL">VERSION_CHECK_URL</a></li><li><a href="global.html#VIEW_METADATA_TTL">VIEW_METADATA_TTL</a></li><li><a href="global.html#VIEW_MODAL_SECTION_DEFAULTS">VIEW_MODAL_SECTION_DEFAULTS</a></li><li><a href="global.html#_VIEW_CHART_DEFAULT_RANGE">_VIEW_CHART_DEFAULT_RANGE</a></li><li><a href="global.html#_VIEW_CHART_RANGES">_VIEW_CHART_RANGES</a></li><li><a href="global.html#_VIEW_CHART_RANGE_LABELS">_VIEW_CHART_RANGE_LABELS</a></li><li><a href="global.html#__ST_COMP_PREFIX">__ST_COMP_PREFIX</a></li><li><a href="global.html#_addDetail">_addDetail</a></li><li><a href="global.html#_applyTrend">_applyTrend</a></li><li><a href="global.html#_cardChipsHTML">_cardChipsHTML</a></li><li><a href="global.html#_cardClickBound">_cardClickBound</a></li><li><a href="global.html#_cardFmt">_cardFmt</a></li><li><a href="global.html#_cardImageHTML">_cardImageHTML</a></li><li><a href="global.html#_cardMetalClass">_cardMetalClass</a></li><li><a href="global.html#_cardSortBarBound">_cardSortBarBound</a></li><li><a href="global.html#_cloudBackupWithCachedPw">_cloudBackupWithCachedPw</a></li><li><a href="global.html#_cloudBtnAction">_cloudBtnAction</a></li><li><a href="global.html#_cloudContext">_cloudContext</a></li><li><a href="global.html#_cloudRestoreWithCachedPw">_cloudRestoreWithCachedPw</a></li><li><a href="global.html#_computePortfolioSummary">_computePortfolioSummary</a></li><li><a href="global.html#_createPriceHistoryChart">_createPriceHistoryChart</a></li><li><a href="global.html#_cvBlobUrls">_cvBlobUrls</a></li><li><a href="global.html#_cvChartInstances">_cvChartInstances</a></li><li><a href="global.html#_cvEscapeAttr">_cvEscapeAttr</a></li><li><a href="global.html#_cvImageObserver">_cvImageObserver</a></li><li><a href="global.html#_darkenColor">_darkenColor</a></li><li><a href="global.html#_dataToPolylineScaled">_dataToPolylineScaled</a></li><li><a href="global.html#_deleteObverseOnSave">_deleteObverseOnSave</a></li><li><a href="global.html#_deleteReverseOnSave">_deleteReverseOnSave</a></li><li><a href="global.html#_detailItem">_detailItem</a></li><li><a href="global.html#_el">_el</a></li><li><a href="global.html#_enhanceCardImages">_enhanceCardImages</a></li><li><a href="global.html#_enhanceTableThumbnails">_enhanceTableThumbnails</a></li><li><a href="global.html#_extractMetadata">_extractMetadata</a></li><li><a href="global.html#_fetchHistoricalSpotData">_fetchHistoricalSpotData</a></li><li><a href="global.html#_fetchNumistaResult">_fetchNumistaResult</a></li><li><a href="global.html#_fetchYearFile">_fetchYearFile</a></li><li><a href="global.html#_getBulkImageSides">_getBulkImageSides</a></li><li><a href="global.html#_getOrCreateHScrollBar">_getOrCreateHScrollBar</a></li><li><a href="global.html#_getThumbPlaceholder">_getThumbPlaceholder</a></li><li><a href="global.html#_getViewMetrics">_getViewMetrics</a></li><li><a href="global.html#_hScrollWired">_hScrollWired</a></li><li><a href="global.html#_imageSlot">_imageSlot</a></li><li><a href="global.html#_initCardCharts">_initCardCharts</a></li><li><a href="global.html#_initSpotControls">_initSpotControls</a></li><li><a href="global.html#_interpolateNulls">_interpolateNulls</a></li><li><a href="global.html#_isLightColor">_isLightColor</a></li><li><a href="global.html#_itemPriceModalFilterText">_itemPriceModalFilterText</a></li><li><a href="global.html#_itemPriceModalUuid">_itemPriceModalUuid</a></li><li><a href="global.html#_loadBulkRowImages">_loadBulkRowImages</a></li><li><a href="global.html#_loadCardImage">_loadCardImage</a></li><li><a href="global.html#_loadSectionConfig">_loadSectionConfig</a></li><li><a href="global.html#_loadThumbImage">_loadThumbImage</a></li><li><a href="global.html#_normalizePatterns">_normalizePatterns</a></li><li><a href="global.html#_openBulkImagePopover">_openBulkImagePopover</a></li><li><a href="global.html#_openExternalPopup">_openExternalPopup</a></li><li><a href="global.html#_openThumbPopover">_openThumbPopover</a></li><li><a href="global.html#_parseColor">_parseColor</a></li><li><a href="global.html#_patternMode">_patternMode</a></li><li><a href="global.html#_pendingObverseBlob">_pendingObverseBlob</a></li><li><a href="global.html#_pendingObversePreviewUrl">_pendingObversePreviewUrl</a></li><li><a href="global.html#_pendingReverseBlob">_pendingReverseBlob</a></li><li><a href="global.html#_pendingReversePreviewUrl">_pendingReversePreviewUrl</a></li><li><a href="global.html#_renderSectionConfigTable">_renderSectionConfigTable</a></li><li><a href="global.html#_renderSortBarSummary">_renderSortBarSummary</a></li><li><a href="global.html#_restoreCdnFolderFromZip">_restoreCdnFolderFromZip</a></li><li><a href="global.html#_saveSectionConfig">_saveSectionConfig</a></li><li><a href="global.html#_schedulePoll">_schedulePoll</a></li><li><a href="global.html#_section">_section</a></li><li><a href="global.html#_setSlotImage">_setSlotImage</a></li><li><a href="global.html#_showCardImage">_showCardImage</a></li><li><a href="global.html#_statusCells">_statusCells</a></li><li><a href="global.html#_storageTinyVisible">_storageTinyVisible</a></li><li><a href="global.html#_storedSortCol">_storedSortCol</a></li><li><a href="global.html#_syncFallbackUUID">_syncFallbackUUID</a></li><li><a href="global.html#_syncHScrollBar">_syncHScrollBar</a></li><li><a href="global.html#_syncPollerTimer">_syncPollerTimer</a></li><li><a href="global.html#_syncProvider">_syncProvider</a></li><li><a href="global.html#_syncPushInFlight">_syncPushInFlight</a></li><li><a href="global.html#_syncRelativeTime">_syncRelativeTime</a></li><li><a href="global.html#_syncRetryDelay">_syncRetryDelay</a></li><li><a href="global.html#_syncSortBar">_syncSortBar</a></li><li><a href="global.html#_thumbBlobUrls">_thumbBlobUrls</a></li><li><a href="global.html#_thumbObserver">_thumbObserver</a></li><li><a href="global.html#_updateHScrollThumb">_updateHScrollThumb</a></li><li><a href="global.html#_vaultPendingFile">_vaultPendingFile</a></li><li><a href="global.html#_viewModalChartInstance">_viewModalChartInstance</a></li><li><a href="global.html#_viewModalObjectUrls">_viewModalObjectUrls</a></li><li><a href="global.html#_viewYearCache">_viewYearCache</a></li><li><a href="global.html#_viewYearFetchPromises">_viewYearFetchPromises</a></li><li><a href="global.html#acceptAck">acceptAck</a></li><li><a href="global.html#activeFilters">activeFilters</a></li><li><a href="global.html#addCompositionOption">addCompositionOption</a></li><li><a href="global.html#addItemTag">addItemTag</a></li><li><a href="global.html#analyzeStorageData">analyzeStorageData</a></li><li><a href="global.html#analyzeStorageItem">analyzeStorageItem</a></li><li><a href="global.html#apiCache">apiCache</a></li><li><a href="global.html#apiConfig">apiConfig</a></li><li><a href="global.html#apiHistoryEntries">apiHistoryEntries</a></li><li><a href="global.html#apiHistoryFilterText">apiHistoryFilterText</a></li><li><a href="global.html#apiHistorySortAsc">apiHistorySortAsc</a></li><li><a href="global.html#apiHistorySortColumn">apiHistorySortColumn</a></li><li><a href="global.html#applyColumnFilter">applyColumnFilter</a></li><li><a href="global.html#applyHeaderToggleVisibility">applyHeaderToggleVisibility</a></li><li><a href="global.html#applyLayoutOrder">applyLayoutOrder</a></li><li><a href="global.html#applyMetalOrder">applyMetalOrder</a></li><li><a href="global.html#applyMinCountThreshold">applyMinCountThreshold</a></li><li><a href="global.html#applyNumistaTags">applyNumistaTags</a></li><li><a href="global.html#applyQuickFilter">applyQuickFilter</a></li><li><a href="global.html#attachAutocomplete">attachAutocomplete</a></li><li><a href="global.html#attachPriceHistorySortHeaders">attachPriceHistorySortHeaders</a></li><li><a href="global.html#autoSelectDefaultProvider">autoSelectDefaultProvider</a></li><li><a href="global.html#autoSyncSpotPrices">autoSyncSpotPrices</a></li><li><a href="global.html#backfillStaktrakrHourly">backfillStaktrakrHourly</a></li><li><a href="global.html#bindAppearanceAndHeaderListeners">bindAppearanceAndHeaderListeners</a></li><li><a href="global.html#bindCardAndTableImageListeners">bindCardAndTableImageListeners</a></li><li><a href="global.html#bindCardClickHandler">bindCardClickHandler</a></li><li><a href="global.html#bindCloudCacheListeners">bindCloudCacheListeners</a></li><li><a href="global.html#bindFilterAndNumistaListeners">bindFilterAndNumistaListeners</a></li><li><a href="global.html#bindGoldbackActionListeners">bindGoldbackActionListeners</a></li><li><a href="global.html#bindGoldbackToggleListeners">bindGoldbackToggleListeners</a></li><li><a href="global.html#bindImageImportExportListeners">bindImageImportExportListeners</a></li><li><a href="global.html#bindImageSettingsListeners">bindImageSettingsListeners</a></li><li><a href="global.html#bindImageSyncListeners">bindImageSyncListeners</a></li><li><a href="global.html#bindLbmaHistoryControls">bindLbmaHistoryControls</a></li><li><a href="global.html#bindNumistaBulkSyncListeners">bindNumistaBulkSyncListeners</a></li><li><a href="global.html#bindPatternRuleModeListeners">bindPatternRuleModeListeners</a></li><li><a href="global.html#bindSettingsModalShellListeners">bindSettingsModalShellListeners</a></li><li><a href="global.html#bindSettingsNavigationListeners">bindSettingsNavigationListeners</a></li><li><a href="global.html#bindStorageListeners">bindStorageListeners</a></li><li><a href="global.html#blobToWebP">blobToWebP</a></li><li><a href="global.html#brandingWarned">brandingWarned</a></li><li><a href="global.html#buildBulkItemRow">buildBulkItemRow</a></li><li><a href="global.html#buildImageExportZip">buildImageExportZip</a></li><li><a href="global.html#buildItemFields">buildItemFields</a></li><li><a href="global.html#buildNumistaSearchQuery">buildNumistaSearchQuery</a></li><li><a href="global.html#buildSearchIndices">buildSearchIndices</a></li><li><a href="global.html#buildTagSection">buildTagSection</a></li><li><a href="global.html#buildViewContent">buildViewContent</a></li><li><a href="global.html#cacheLookupTable">cacheLookupTable</a></li><li><a href="global.html#calculateApiUsage">calculateApiUsage</a></li><li><a href="global.html#calculateLevenshteinDistance">calculateLevenshteinDistance</a></li><li><a href="global.html#calculateRetailPrice">calculateRetailPrice</a></li><li><a href="global.html#catalogHistory">catalogHistory</a></li><li><a href="global.html#catalogMap">catalogMap</a></li><li><a href="global.html#changeLog">changeLog</a></li><li><a href="global.html#chartInstances">chartInstances</a></li><li><a href="global.html#checkFileSize">checkFileSize</a></li><li><a href="global.html#checkRemoteVersion">checkRemoteVersion</a></li><li><a href="global.html#checkVersionChange">checkVersionChange</a></li><li><a href="global.html#cleanOrphanedItemPriceHistory">cleanOrphanedItemPriceHistory</a></li><li><a href="global.html#cleanSearchTerm">cleanSearchTerm</a></li><li><a href="global.html#cleanString">cleanString</a></li><li><a href="global.html#cleanupStorage">cleanupStorage</a></li><li><a href="global.html#clearAllCachedData">clearAllCachedData</a></li><li><a href="global.html#clearAllFilters">clearAllFilters</a></li><li><a href="global.html#clearApiCache">clearApiCache</a></li><li><a href="global.html#clearApiConfig">clearApiConfig</a></li><li><a href="global.html#clearApiHistory">clearApiHistory</a></li><li><a href="global.html#clearApiKey">clearApiKey</a></li><li><a href="global.html#clearCatalogHistory">clearCatalogHistory</a></li><li><a href="global.html#clearChangeLog">clearChangeLog</a></li><li><a href="global.html#clearItemPriceHistory">clearItemPriceHistory</a></li><li><a href="global.html#clearLookupCache">clearLookupCache</a></li><li><a href="global.html#clearSpotHistory">clearSpotHistory</a></li><li><a href="global.html#clearUploadState">clearUploadState</a></li><li><a href="global.html#closeCurrencyDropdown">closeCurrencyDropdown</a></li><li><a href="global.html#closeCurrencyDropdownOnOutside">closeCurrencyDropdownOnOutside</a></li><li><a href="global.html#closeDetailsModal">closeDetailsModal</a></li><li><a href="global.html#closeModalById">closeModalById</a></li><li><a href="global.html#closeNumistaResultsModal">closeNumistaResultsModal</a></li><li><a href="global.html#closePcgsFieldPicker">closePcgsFieldPicker</a></li><li><a href="global.html#closeSpotLookupModal">closeSpotLookupModal</a></li><li><a href="global.html#closeVaultModal">closeVaultModal</a></li><li><a href="global.html#closeViewModal">closeViewModal</a></li><li><a href="global.html#cloudBackupEnabled">cloudBackupEnabled</a></li><li><a href="global.html#coerceFieldValue">coerceFieldValue</a></li><li><a href="global.html#collectVaultData">collectVaultData</a></li><li><a href="global.html#commitItemToInventory">commitItemToInventory</a></li><li><a href="global.html#compareVersions">compareVersions</a></li><li><a href="global.html#compositionOptions">compositionOptions</a></li><li><a href="global.html#computeGoldbackEstimatedRate">computeGoldbackEstimatedRate</a></li><li><a href="global.html#computeItemValuation">computeItemValuation</a></li><li><a href="global.html#computeMeltValue">computeMeltValue</a></li><li><a href="global.html#convertToUsd">convertToUsd</a></li><li><a href="global.html#createBackupData">createBackupData</a></li><li><a href="global.html#createBackupZip">createBackupZip</a></li><li><a href="global.html#createBreakdownElements">createBreakdownElements</a></li><li><a href="global.html#createDummyElement">createDummyElement</a></li><li><a href="global.html#createEmptyLookupTable">createEmptyLookupTable</a></li><li><a href="global.html#createFieldInput">createFieldInput</a></li><li><a href="global.html#createPieChart">createPieChart</a></li><li><a href="global.html#createStorageItemModal">createStorageItemModal</a></li><li><a href="global.html#createThumbEl">createThumbEl</a></li><li><a href="global.html#currentLookupTable">currentLookupTable</a></li><li><a href="global.html#currentMonthKey">currentMonthKey</a></li><li><a href="global.html#cycleSpotTrend">cycleSpotTrend</a></li><li><a href="global.html#dataToPolyline">dataToPolyline</a></li><li><a href="global.html#dataUriToBlob">dataUriToBlob</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#debugError">debugError</a></li><li><a href="global.html#debugLog">debugLog</a></li><li><a href="global.html#debugWarn">debugWarn</a></li><li><a href="global.html#deleteItem">deleteItem</a></li><li><a href="global.html#deleteItemPriceEntry">deleteItemPriceEntry</a></li><li><a href="global.html#deleteItemTags">deleteItemTags</a></li><li><a href="global.html#deleteTagGlobal">deleteTagGlobal</a></li><li><a href="global.html#deriveSearchLabel">deriveSearchLabel</a></li><li><a href="global.html#destroyCharts">destroyCharts</a></li><li><a href="global.html#destroySparklines">destroySparklines</a></li><li><a href="global.html#detailsChartMetric">detailsChartMetric</a></li><li><a href="global.html#detailsResizeObserver">detailsResizeObserver</a></li><li><a href="global.html#detectCurrency">detectCurrency</a></li><li><a href="global.html#disableCloudSync">disableCloudSync</a></li><li><a href="global.html#dismissAllAutocompletes">dismissAllAutocompletes</a></li><li><a href="global.html#dismissNotesModal">dismissNotesModal</a></li><li><a href="global.html#displayCurrency">displayCurrency</a></li><li><a href="global.html#downloadCompleteBackup">downloadCompleteBackup</a></li><li><a href="global.html#downloadFile">downloadFile</a></li><li><a href="global.html#downloadStorageReport">downloadStorageReport</a></li><li><a href="global.html#duplicateItem">duplicateItem</a></li><li><a href="global.html#editItem">editItem</a></li><li><a href="global.html#editingChangeLogIndex">editingChangeLogIndex</a></li><li><a href="global.html#editingIndex">editingIndex</a></li><li><a href="global.html#elements">elements</a></li><li><a href="global.html#enableCloudSync">enableCloudSync</a></li><li><a href="global.html#escapeAttribute">escapeAttribute</a></li><li><a href="global.html#escapeHtml">escapeHtml</a></li><li><a href="global.html#escapeHtmlCatalog">escapeHtmlCatalog</a></li><li><a href="global.html#escapeHtmlPcgs">escapeHtmlPcgs</a></li><li><a href="global.html#exchangeRates">exchangeRates</a></li><li><a href="global.html#exportCsv">exportCsv</a></li><li><a href="global.html#exportEncryptedBackup">exportEncryptedBackup</a></li><li><a href="global.html#exportGoldbackHistory">exportGoldbackHistory</a></li><li><a href="global.html#exportJson">exportJson</a></li><li><a href="global.html#exportNumistaCsv">exportNumistaCsv</a></li><li><a href="global.html#exportPdf">exportPdf</a></li><li><a href="global.html#exportSpotHistory">exportSpotHistory</a></li><li><a href="global.html#extractUniqueValues">extractUniqueValues</a></li><li><a href="global.html#featureFlags">featureFlags</a></li><li><a href="global.html#fetchBatchSpotPrices">fetchBatchSpotPrices</a></li><li><a href="global.html#fetchExchangeRates">fetchExchangeRates</a></li><li><a href="global.html#fetchHistoryBatched">fetchHistoryBatched</a></li><li><a href="global.html#fetchLatestPrices">fetchLatestPrices</a></li><li><a href="global.html#fetchMetalPriceApiHourly">fetchMetalPriceApiHourly</a></li><li><a href="global.html#fetchSpotForDate">fetchSpotForDate</a></li><li><a href="global.html#fetchSpotPrice">fetchSpotPrice</a></li><li><a href="global.html#fetchSpotPricesFromApi">fetchSpotPricesFromApi</a></li><li><a href="global.html#fetchStaktrakrHourlyRange">fetchStaktrakrHourlyRange</a></li><li><a href="global.html#fetchStaktrakrPrices">fetchStaktrakrPrices</a></li><li><a href="global.html#fetchYearFile">fetchYearFile</a></li><li><a href="global.html#fillFormFromNumistaResult">fillFormFromNumistaResult</a></li><li><a href="global.html#fillFormFromPcgsResult">fillFormFromPcgsResult</a></li><li><a href="global.html#filterInventory">filterInventory</a></li><li><a href="global.html#filterInventoryAdvanced">filterInventoryAdvanced</a></li><li><a href="global.html#filterItemPriceHistoryTable">filterItemPriceHistoryTable</a></li><li><a href="global.html#flattenGoldbackHistory">flattenGoldbackHistory</a></li><li><a href="global.html#formatCurrency">formatCurrency</a></li><li><a href="global.html#formatDateOnly">formatDateOnly</a></li><li><a href="global.html#formatDisplayDate">formatDisplayDate</a></li><li><a href="global.html#formatFileSize">formatFileSize</a></li><li><a href="global.html#formatLossProfit">formatLossProfit</a></li><li><a href="global.html#formatOffsetLabel">formatOffsetLabel</a></li><li><a href="global.html#formatPurchaseLocation">formatPurchaseLocation</a></li><li><a href="global.html#formatStorageLocation">formatStorageLocation</a></li><li><a href="global.html#formatTimeOnly">formatTimeOnly</a></li><li><a href="global.html#formatTimestamp">formatTimestamp</a></li><li><a href="global.html#formatWeight">formatWeight</a></li><li><a href="global.html#fuzzyMatch">fuzzyMatch</a></li><li><a href="global.html#fuzzySearch">fuzzySearch</a></li><li><a href="global.html#gbHistoryFilterText">gbHistoryFilterText</a></li><li><a href="global.html#gbHistorySortAsc">gbHistorySortAsc</a></li><li><a href="global.html#gbHistorySortColumn">gbHistorySortColumn</a></li><li><a href="global.html#generateBackupHtml">generateBackupHtml</a></li><li><a href="global.html#generateCategorySummary">generateCategorySummary</a></li><li><a href="global.html#generateColors">generateColors</a></li><li><a href="global.html#generateItemDataTable">generateItemDataTable</a></li><li><a href="global.html#generateLookupTable">generateLookupTable</a></li><li><a href="global.html#generateNGrams">generateNGrams</a></li><li><a href="global.html#generateReadmeContent">generateReadmeContent</a></li><li><a href="global.html#generateSparklineSVG">generateSparklineSVG</a></li><li><a href="global.html#generateStorageReport">generateStorageReport</a></li><li><a href="global.html#generateStorageReportHTML">generateStorageReportHTML</a></li><li><a href="global.html#generateStorageReportTar">generateStorageReportTar</a></li><li><a href="global.html#generateUUID">generateUUID</a></li><li><a href="global.html#generateVariations">generateVariations</a></li><li><a href="global.html#get24hChange">get24hChange</a></li><li><a href="global.html#getAllMetalsBreakdownData">getAllMetalsBreakdownData</a></li><li><a href="global.html#getAllUniqueTags">getAllUniqueTags</a></li><li><a href="global.html#getApiAvailability">getApiAvailability</a></li><li><a href="global.html#getAppTitle">getAppTitle</a></li><li><a href="global.html#getBreakdownData">getBreakdownData</a></li><li><a href="global.html#getCacheDurationMs">getCacheDurationMs</a></li><li><a href="global.html#getCachedLookupTable">getCachedLookupTable</a></li><li><a href="global.html#getCardStyle">getCardStyle</a></li><li><a href="global.html#getChartBackgroundColor">getChartBackgroundColor</a></li><li><a href="global.html#getChartColor">getChartColor</a></li><li><a href="global.html#getChartTextColor">getChartTextColor</a></li><li><a href="global.html#getChipColors">getChipColors</a></li><li><a href="global.html#getCompositionFirstWords">getCompositionFirstWords</a></li><li><a href="global.html#getContrastColor">getContrastColor</a></li><li><a href="global.html#getCryptoBackend">getCryptoBackend</a></li><li><a href="global.html#getCurrencySymbol">getCurrencySymbol</a></li><li><a href="global.html#getDateChunks">getDateChunks</a></li><li><a href="global.html#getDebugHistory">getDebugHistory</a></li><li><a href="global.html#getDefaultSyncMode">getDefaultSyncMode</a></li><li><a href="global.html#getDisplayComposition">getDisplayComposition</a></li><li><a href="global.html#getEmbeddedRoadmap">getEmbeddedRoadmap</a></li><li><a href="global.html#getEmbeddedSeedData">getEmbeddedSeedData</a></li><li><a href="global.html#getEmbeddedWhatsNew">getEmbeddedWhatsNew</a></li><li><a href="global.html#getExchangeRate">getExchangeRate</a></li><li><a href="global.html#getExistingElement">getExistingElement</a></li><li><a href="global.html#getFilterChipCategoryConfig">getFilterChipCategoryConfig</a></li><li><a href="global.html#getFooterDomain">getFooterDomain</a></li><li><a href="global.html#getGoldbackDenominationPrice">getGoldbackDenominationPrice</a></li><li><a href="global.html#getGoldbackRetailPrice">getGoldbackRetailPrice</a></li><li><a href="global.html#getHistoricalSparklineData">getHistoricalSparklineData</a></li><li><a href="global.html#getInlineChipConfig">getInlineChipConfig</a></li><li><a href="global.html#getItemTags">getItemTags</a></li><li><a href="global.html#getLastProviderSyncTime">getLastProviderSyncTime</a></li><li><a href="global.html#getLastUpdateTime">getLastUpdateTime</a></li><li><a href="global.html#getLayoutSectionConfig">getLayoutSectionConfig</a></li><li><a href="global.html#getLbmaReferenceYears">getLbmaReferenceYears</a></li><li><a href="global.html#getLookupStats">getLookupStats</a></li><li><a href="global.html#getMetalColor">getMetalColor</a></li><li><a href="global.html#getMetalOrderConfig">getMetalOrderConfig</a></li><li><a href="global.html#getNumistaViewFieldConfig">getNumistaViewFieldConfig</a></li><li><a href="global.html#getPasswordStrength">getPasswordStrength</a></li><li><a href="global.html#getPopularNumistaItems">getPopularNumistaItems</a></li><li><a href="global.html#getProviderOrder">getProviderOrder</a></li><li><a href="global.html#getRequiredYears">getRequiredYears</a></li><li><a href="global.html#getSparklineData">getSparklineData</a></li><li><a href="global.html#getSpotHistoryForMetal">getSpotHistoryForMetal</a></li><li><a href="global.html#getStorageItemDescription">getStorageItemDescription</a></li><li><a href="global.html#getStorageItemDisplayName">getStorageItemDisplayName</a></li><li><a href="global.html#getStorageReportCSS">getStorageReportCSS</a></li><li><a href="global.html#getStorageReportJS">getStorageReportJS</a></li><li><a href="global.html#getSyncDeviceId">getSyncDeviceId</a></li><li><a href="global.html#getSyncPassword">getSyncPassword</a></li><li><a href="global.html#getTemplateVariables">getTemplateVariables</a></li><li><a href="global.html#getUserFriendlyMessage">getUserFriendlyMessage</a></li><li><a href="global.html#getVersionString">getVersionString</a></li><li><a href="global.html#getViewModalSectionConfig">getViewModalSectionConfig</a></li><li><a href="global.html#goldbackEnabled">goldbackEnabled</a></li><li><a href="global.html#goldbackEstimateEnabled">goldbackEstimateEnabled</a></li><li><a href="global.html#goldbackEstimateModifier">goldbackEstimateModifier</a></li><li><a href="global.html#goldbackPriceHistory">goldbackPriceHistory</a></li><li><a href="global.html#goldbackPrices">goldbackPrices</a></li><li><a href="global.html#gramsToOzt">gramsToOzt</a></li><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#handleHistoryPull">handleHistoryPull</a></li><li><a href="global.html#handleImageDeletion">handleImageDeletion</a></li><li><a href="global.html#handleProviderSave">handleProviderSave</a></li><li><a href="global.html#handleProviderSync">handleProviderSync</a></li><li><a href="global.html#handleRemoteChange">handleRemoteChange</a></li><li><a href="global.html#handleSaveSearchPattern">handleSaveSearchPattern</a></li><li><a href="global.html#handleStaktrakrHistoryPull">handleStaktrakrHistoryPull</a></li><li><a href="global.html#handleVaultAction">handleVaultAction</a></li><li><a href="global.html#hideAboutModal">hideAboutModal</a></li><li><a href="global.html#hideAckModal">hideAckModal</a></li><li><a href="global.html#hideApiHistoryModal">hideApiHistoryModal</a></li><li><a href="global.html#hideApiModal">hideApiModal</a></li><li><a href="global.html#hideApiProvidersModal">hideApiProvidersModal</a></li><li><a href="global.html#hideCatalogHistoryModal">hideCatalogHistoryModal</a></li><li><a href="global.html#hideDebugModal">hideDebugModal</a></li><li><a href="global.html#hideEmptyColumns">hideEmptyColumns</a></li><li><a href="global.html#hideFilesModal">hideFilesModal</a></li><li><a href="global.html#hideGoldbackHistoryModal">hideGoldbackHistoryModal</a></li><li><a href="global.html#hideManualInput">hideManualInput</a></li><li><a href="global.html#hideProviderInfo">hideProviderInfo</a></li><li><a href="global.html#hideSettingsModal">hideSettingsModal</a></li><li><a href="global.html#historicalDataCache">historicalDataCache</a></li><li><a href="global.html#historicalFetchPromises">historicalFetchPromises</a></li><li><a href="global.html#importCsv">importCsv</a></li><li><a href="global.html#importEncryptedBackup">importEncryptedBackup</a></li><li><a href="global.html#importJson">importJson</a></li><li><a href="global.html#importNumistaCsv">importNumistaCsv</a></li><li><a href="global.html#importSpotHistory">importSpotHistory</a></li><li><a href="global.html#initCardSortBar">initCardSortBar</a></li><li><a href="global.html#initCloudSync">initCloudSync</a></li><li><a href="global.html#initSpotHistoryButtons">initSpotHistoryButtons</a></li><li><a href="global.html#initTheme">initTheme</a></li><li><a href="global.html#initializeAutocomplete">initializeAutocomplete</a></li><li><a href="global.html#injectVersionString">injectVersionString</a></li><li><a href="global.html#inventory">inventory</a></li><li><a href="global.html#isCardViewActive">isCardViewActive</a></li><li><a href="global.html#isFeatureEnabled">isFeatureEnabled</a></li><li><a href="global.html#isGoldbackPricingActive">isGoldbackPricingActive</a></li><li><a href="global.html#isValidSelectOption">isValidSelectOption</a></li><li><a href="global.html#itemPriceHistory">itemPriceHistory</a></li><li><a href="global.html#itemTags">itemTags</a></li><li><a href="global.html#itemsPerPage">itemsPerPage</a></li><li><a href="global.html#loadAnnouncements">loadAnnouncements</a></li><li><a href="global.html#loadApiCache">loadApiCache</a></li><li><a href="global.html#loadApiConfig">loadApiConfig</a></li><li><a href="global.html#loadCatalogHistory">loadCatalogHistory</a></li><li><a href="global.html#loadData">loadData</a></li><li><a href="global.html#loadDisplayCurrency">loadDisplayCurrency</a></li><li><a href="global.html#loadExchangeRates">loadExchangeRates</a></li><li><a href="global.html#loadGoldbackEnabled">loadGoldbackEnabled</a></li><li><a href="global.html#loadGoldbackEstimateEnabled">loadGoldbackEstimateEnabled</a></li><li><a href="global.html#loadGoldbackEstimateModifier">loadGoldbackEstimateModifier</a></li><li><a href="global.html#loadGoldbackPriceHistory">loadGoldbackPriceHistory</a></li><li><a href="global.html#loadGoldbackPrices">loadGoldbackPrices</a></li><li><a href="global.html#loadInventory">loadInventory</a></li><li><a href="global.html#loadItemPriceHistory">loadItemPriceHistory</a></li><li><a href="global.html#loadItemTags">loadItemTags</a></li><li><a href="global.html#loadLbmaReferenceEntries">loadLbmaReferenceEntries</a></li><li><a href="global.html#loadLookupTable">loadLookupTable</a></li><li><a href="global.html#loadProviderPriorities">loadProviderPriorities</a></li><li><a href="global.html#loadSeedImages">loadSeedImages</a></li><li><a href="global.html#loadSeedInventory">loadSeedInventory</a></li><li><a href="global.html#loadSeedSpotHistory">loadSeedSpotHistory</a></li><li><a href="global.html#loadSpotHistory">loadSpotHistory</a></li><li><a href="global.html#loadTrendRanges">loadTrendRanges</a></li><li><a href="global.html#loadViewImages">loadViewImages</a></li><li><a href="global.html#loadViewNumistaData">loadViewNumistaData</a></li><li><a href="global.html#logChange">logChange</a></li><li><a href="global.html#logItemChanges">logItemChanges</a></li><li><a href="global.html#logSyncActivity">logSyncActivity</a></li><li><a href="global.html#lookupPcgsByNumber">lookupPcgsByNumber</a></li><li><a href="global.html#lookupPcgsFromForm">lookupPcgsFromForm</a></li><li><a href="global.html#mapNumistaType">mapNumistaType</a></li><li><a href="global.html#marketValueViewItems">marketValueViewItems</a></li><li><a href="global.html#matchCoinSeries">matchCoinSeries</a></li><li><a href="global.html#mergeItemPriceHistory">mergeItemPriceHistory</a></li><li><a href="global.html#migrateHourlySource">migrateHourlySource</a></li><li><a href="global.html#migrateLayoutVisibility">migrateLayoutVisibility</a></li><li><a href="global.html#migrateProviderPriority">migrateProviderPriority</a></li><li><a href="global.html#monitorPerformance">monitorPerformance</a></li><li><a href="global.html#normalizeItemName">normalizeItemName</a></li><li><a href="global.html#normalizeString">normalizeString</a></li><li><a href="global.html#normalizeType">normalizeType</a></li><li><a href="global.html#notesIndex">notesIndex</a></li><li><a href="global.html#onGoldSpotPriceChanged">onGoldSpotPriceChanged</a></li><li><a href="global.html#openEbaySearch">openEbaySearch</a></li><li><a href="global.html#openItemPriceHistoryModal">openItemPriceHistoryModal</a></li><li><a href="global.html#openModalById">openModalById</a></li><li><a href="global.html#openNumistaModal">openNumistaModal</a></li><li><a href="global.html#openSpotLookupModal">openSpotLookupModal</a></li><li><a href="global.html#openStorageReportPopup">openStorageReportPopup</a></li><li><a href="global.html#openVaultModal">openVaultModal</a></li><li><a href="global.html#optimizeStoragePhase1C">optimizeStoragePhase1C</a></li><li><a href="global.html#optionalListener">optionalListener</a></li><li><a href="global.html#oztToGrams">oztToGrams</a></li><li><a href="global.html#pad2">pad2</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#parseFraction">parseFraction</a></li><li><a href="global.html#parseItemFormFields">parseItemFormFields</a></li><li><a href="global.html#parseNumistaMetal">parseNumistaMetal</a></li><li><a href="global.html#parsePcgsResponse">parsePcgsResponse</a></li><li><a href="global.html#parsePriceToUSD">parsePriceToUSD</a></li><li><a href="global.html#parsePurity">parsePurity</a></li><li><a href="global.html#parseSearchPatterns">parseSearchPatterns</a></li><li><a href="global.html#parseVaultFile">parseVaultFile</a></li><li><a href="global.html#parseWeight">parseWeight</a></li><li><a href="global.html#pcgsFetch">pcgsFetch</a></li><li><a href="global.html#pcgsPreflightCheck">pcgsPreflightCheck</a></li><li><a href="global.html#persistInventoryAndRefresh">persistInventoryAndRefresh</a></li><li><a href="global.html#pollForRemoteChanges">pollForRemoteChanges</a></li><li><a href="global.html#populateAboutModal">populateAboutModal</a></li><li><a href="global.html#populateAckModal">populateAckModal</a></li><li><a href="global.html#populateApiSection">populateApiSection</a></li><li><a href="global.html#populateImagesSection">populateImagesSection</a></li><li><a href="global.html#populateVersionModal">populateVersionModal</a></li><li><a href="global.html#preparePriceHistoryRows">preparePriceHistoryRows</a></li><li><a href="global.html#priceHistoryFilterText">priceHistoryFilterText</a></li><li><a href="global.html#processUploadedImage">processUploadedImage</a></li><li><a href="global.html#providerRequiresKey">providerRequiresKey</a></li><li><a href="global.html#pullSyncVault">pullSyncVault</a></li><li><a href="global.html#purgeCatalogHistory">purgeCatalogHistory</a></li><li><a href="global.html#purgeItemPriceHistory">purgeItemPriceHistory</a></li><li><a href="global.html#purgeSpotHistory">purgeSpotHistory</a></li><li><a href="global.html#pushSyncVault">pushSyncVault</a></li><li><a href="global.html#recalcItem">recalcItem</a></li><li><a href="global.html#recordAllItemPriceSnapshots">recordAllItemPriceSnapshots</a></li><li><a href="global.html#recordCatalogHistory">recordCatalogHistory</a></li><li><a href="global.html#recordGoldbackPrices">recordGoldbackPrices</a></li><li><a href="global.html#recordItemPrice">recordItemPrice</a></li><li><a href="global.html#recordSingleItemPrice">recordSingleItemPrice</a></li><li><a href="global.html#recordSpot">recordSpot</a></li><li><a href="global.html#refreshCompositionOptions">refreshCompositionOptions</a></li><li><a href="global.html#refreshFromCache">refreshFromCache</a></li><li><a href="global.html#refreshLookupTable">refreshLookupTable</a></li><li><a href="global.html#refreshProviderStatuses">refreshProviderStatuses</a></li><li><a href="global.html#refreshSyncUI">refreshSyncUI</a></li><li><a href="global.html#refreshTotalsDots">refreshTotalsDots</a></li><li><a href="global.html#registerName">registerName</a></li><li><a href="global.html#removeFilter">removeFilter</a></li><li><a href="global.html#removeItemTag">removeItemTag</a></li><li><a href="global.html#renameTag">renameTag</a></li><li><a href="global.html#renderActiveFilters">renderActiveFilters</a></li><li><a href="global.html#renderApiHistoryTable">renderApiHistoryTable</a></li><li><a href="global.html#renderApiStatusSummary">renderApiStatusSummary</a></li><li><a href="global.html#renderBulkTable">renderBulkTable</a></li><li><a href="global.html#renderBulkTableBody">renderBulkTableBody</a></li><li><a href="global.html#renderBulkToolbar">renderBulkToolbar</a></li><li><a href="global.html#renderCardA">renderCardA</a></li><li><a href="global.html#renderCardB">renderCardB</a></li><li><a href="global.html#renderCardC">renderCardC</a></li><li><a href="global.html#renderCardView">renderCardView</a></li><li><a href="global.html#renderCatalogHistoryForSettings">renderCatalogHistoryForSettings</a></li><li><a href="global.html#renderCatalogHistoryTable">renderCatalogHistoryTable</a></li><li><a href="global.html#renderChangeLog">renderChangeLog</a></li><li><a href="global.html#renderCloudBackupList">renderCloudBackupList</a></li><li><a href="global.html#renderCustomPatternRules">renderCustomPatternRules</a></li><li><a href="global.html#renderCustomRuleTable">renderCustomRuleTable</a></li><li><a href="global.html#renderEligibleItemsTable">renderEligibleItemsTable</a></li><li><a href="global.html#renderFilterChipCategoryTable">renderFilterChipCategoryTable</a></li><li><a href="global.html#renderGoldbackHistoryTable">renderGoldbackHistoryTable</a></li><li><a href="global.html#renderImageStorageStats">renderImageStorageStats</a></li><li><a href="global.html#renderInlineChipConfigTable">renderInlineChipConfigTable</a></li><li><a href="global.html#renderItemPriceHistoryModalTable">renderItemPriceHistoryModalTable</a></li><li><a href="global.html#renderItemPriceHistoryTable">renderItemPriceHistoryTable</a></li><li><a href="global.html#renderLayoutSectionConfigTable">renderLayoutSectionConfigTable</a></li><li><a href="global.html#renderLbmaHistoryTable">renderLbmaHistoryTable</a></li><li><a href="global.html#renderLogTab">renderLogTab</a></li><li><a href="global.html#renderMetalOrderConfigTable">renderMetalOrderConfigTable</a></li><li><a href="global.html#renderNumistaFieldCheckboxes">renderNumistaFieldCheckboxes</a></li><li><a href="global.html#renderNumistaResultCard">renderNumistaResultCard</a></li><li><a href="global.html#renderNumistaSelectedItem">renderNumistaSelectedItem</a></li><li><a href="global.html#renderNumistaSyncUI">renderNumistaSyncUI</a></li><li><a href="global.html#renderNumistaUsageBar">renderNumistaUsageBar</a></li><li><a href="global.html#renderPcgsFieldCheckboxes">renderPcgsFieldCheckboxes</a></li><li><a href="global.html#renderPcgsSelectedItem">renderPcgsSelectedItem</a></li><li><a href="global.html#renderPcgsUsageBar">renderPcgsUsageBar</a></li><li><a href="global.html#renderSeedRuleTable">renderSeedRuleTable</a></li><li><a href="global.html#renderSpotHistoryTable">renderSpotHistoryTable</a></li><li><a href="global.html#renderSpotLookupEmpty">renderSpotLookupEmpty</a></li><li><a href="global.html#renderSpotLookupResults">renderSpotLookupResults</a></li><li><a href="global.html#renderStorageSection">renderStorageSection</a></li><li><a href="global.html#renderSyncHistorySection">renderSyncHistorySection</a></li><li><a href="global.html#renderSyncStats">renderSyncStats</a></li><li><a href="global.html#renderUserImageGrid">renderUserImageGrid</a></li><li><a href="global.html#renderVersionBadge">renderVersionBadge</a></li><li><a href="global.html#renderViewModalSectionConfigTable">renderViewModalSectionConfigTable</a></li><li><a href="global.html#replaceTemplateVariables">replaceTemplateVariables</a></li><li><a href="global.html#resetSpot">resetSpot</a></li><li><a href="global.html#resetSpotByName">resetSpotByName</a></li><li><a href="global.html#resetSpotPrice">resetSpotPrice</a></li><li><a href="global.html#resolveElement">resolveElement</a></li><li><a href="global.html#restoreBackupZip">restoreBackupZip</a></li><li><a href="global.html#restoreVaultData">restoreVaultData</a></li><li><a href="global.html#resyncCachedEntry">resyncCachedEntry</a></li><li><a href="global.html#safeAttachListener">safeAttachListener</a></li><li><a href="global.html#safeDebug">safeDebug</a></li><li><a href="global.html#safeGetElement">safeGetElement</a></li><li><a href="global.html#sanitizeHtml">sanitizeHtml</a></li><li><a href="global.html#sanitizeImportedItem">sanitizeImportedItem</a></li><li><a href="global.html#sanitizeObjectFields">sanitizeObjectFields</a></li><li><a href="global.html#sanitizeTablesOnLoad">sanitizeTablesOnLoad</a></li><li><a href="global.html#saveApiCache">saveApiCache</a></li><li><a href="global.html#saveApiConfig">saveApiConfig</a></li><li><a href="global.html#saveCatalogHistory">saveCatalogHistory</a></li><li><a href="global.html#saveData">saveData</a></li><li><a href="global.html#saveDisplayCurrency">saveDisplayCurrency</a></li><li><a href="global.html#saveExchangeRates">saveExchangeRates</a></li><li><a href="global.html#saveFilterChipCategoryConfig">saveFilterChipCategoryConfig</a></li><li><a href="global.html#saveGoldbackEnabled">saveGoldbackEnabled</a></li><li><a href="global.html#saveGoldbackEstimateEnabled">saveGoldbackEstimateEnabled</a></li><li><a href="global.html#saveGoldbackEstimateModifier">saveGoldbackEstimateModifier</a></li><li><a href="global.html#saveGoldbackPriceHistory">saveGoldbackPriceHistory</a></li><li><a href="global.html#saveGoldbackPrices">saveGoldbackPrices</a></li><li><a href="global.html#saveInlineChipConfig">saveInlineChipConfig</a></li><li><a href="global.html#saveInventory">saveInventory</a></li><li><a href="global.html#saveItemPriceHistory">saveItemPriceHistory</a></li><li><a href="global.html#saveItemTags">saveItemTags</a></li><li><a href="global.html#saveLayoutSectionConfig">saveLayoutSectionConfig</a></li><li><a href="global.html#saveNumistaViewFieldConfig">saveNumistaViewFieldConfig</a></li><li><a href="global.html#saveProviderPriorities">saveProviderPriorities</a></li><li><a href="global.html#saveSpotHistory">saveSpotHistory</a></li><li><a href="global.html#saveTrendRange">saveTrendRange</a></li><li><a href="global.html#saveUserImageForItem">saveUserImageForItem</a></li><li><a href="global.html#saveViewModalSectionConfig">saveViewModalSectionConfig</a></li><li><a href="global.html#scheduleSyncPush">scheduleSyncPush</a></li><li><a href="global.html#searchHistoricalByDate">searchHistoricalByDate</a></li><li><a href="global.html#searchPatternExistsInCustomGroups">searchPatternExistsInCustomGroups</a></li><li><a href="global.html#searchPatternMatchesAutoChip">searchPatternMatchesAutoChip</a></li><li><a href="global.html#searchQuery">searchQuery</a></li><li><a href="global.html#searchSpotByDate">searchSpotByDate</a></li><li><a href="global.html#serializeVaultFile">serializeVaultFile</a></li><li><a href="global.html#setDefaultProvider">setDefaultProvider</a></li><li><a href="global.html#setEditPreviewUrl">setEditPreviewUrl</a></li><li><a href="global.html#setProviderStatus">setProviderStatus</a></li><li><a href="global.html#setTheme">setTheme</a></li><li><a href="global.html#settingsCatalogSortAsc">settingsCatalogSortAsc</a></li><li><a href="global.html#settingsCatalogSortColumn">settingsCatalogSortColumn</a></li><li><a href="global.html#settingsCloudSortAsc">settingsCloudSortAsc</a></li><li><a href="global.html#settingsCloudSortColumn">settingsCloudSortColumn</a></li><li><a href="global.html#settingsLbmaControlsBound">settingsLbmaControlsBound</a></li><li><a href="global.html#settingsLbmaLoadPromise">settingsLbmaLoadPromise</a></li><li><a href="global.html#settingsLbmaReferenceCache">settingsLbmaReferenceCache</a></li><li><a href="global.html#settingsLbmaSortAsc">settingsLbmaSortAsc</a></li><li><a href="global.html#settingsLbmaSortColumn">settingsLbmaSortColumn</a></li><li><a href="global.html#settingsPriceSortAsc">settingsPriceSortAsc</a></li><li><a href="global.html#settingsPriceSortColumn">settingsPriceSortColumn</a></li><li><a href="global.html#settingsSpotSortAsc">settingsSpotSortAsc</a></li><li><a href="global.html#settingsSpotSortColumn">settingsSpotSortColumn</a></li><li><a href="global.html#setupAboutModalEvents">setupAboutModalEvents</a></li><li><a href="global.html#setupAckModalEvents">setupAckModalEvents</a></li><li><a href="global.html#setupApiEvents">setupApiEvents</a></li><li><a href="global.html#setupBasicEventListeners">setupBasicEventListeners</a></li><li><a href="global.html#setupBulkEditControls">setupBulkEditControls</a></li><li><a href="global.html#setupColumnResizing">setupColumnResizing</a></li><li><a href="global.html#setupDataManagementListeners">setupDataManagementListeners</a></li><li><a href="global.html#setupEventListeners">setupEventListeners</a></li><li><a href="global.html#setupFormatImport">setupFormatImport</a></li><li><a href="global.html#setupHeaderButtonListeners">setupHeaderButtonListeners</a></li><li><a href="global.html#setupImportExportListeners">setupImportExportListeners</a></li><li><a href="global.html#setupItemFormListeners">setupItemFormListeners</a></li><li><a href="global.html#setupNoteAndModalListeners">setupNoteAndModalListeners</a></li><li><a href="global.html#setupPagination">setupPagination</a></li><li><a href="global.html#setupProviderPriority">setupProviderPriority</a></li><li><a href="global.html#setupProviderSettingsListeners">setupProviderSettingsListeners</a></li><li><a href="global.html#setupResponsiveColumns">setupResponsiveColumns</a></li><li><a href="global.html#setupSearch">setupSearch</a></li><li><a href="global.html#setupSearchAndChipListeners">setupSearchAndChipListeners</a></li><li><a href="global.html#setupSettingsEventListeners">setupSettingsEventListeners</a></li><li><a href="global.html#setupSpotPriceListeners">setupSpotPriceListeners</a></li><li><a href="global.html#setupSystemThemeListener">setupSystemThemeListener</a></li><li><a href="global.html#setupTableSortListeners">setupTableSortListeners</a></li><li><a href="global.html#setupThemeToggle">setupThemeToggle</a></li><li><a href="global.html#setupVaultListeners">setupVaultListeners</a></li><li><a href="global.html#setupVersionModalEvents">setupVersionModalEvents</a></li><li><a href="global.html#shouldShowSearchSaveButton">shouldShowSearchSaveButton</a></li><li><a href="global.html#showAboutModal">showAboutModal</a></li><li><a href="global.html#showAckModal">showAckModal</a></li><li><a href="global.html#showApiHistoryModal">showApiHistoryModal</a></li><li><a href="global.html#showApiModal">showApiModal</a></li><li><a href="global.html#showApiProvidersModal">showApiProvidersModal</a></li><li><a href="global.html#showAppAlert">showAppAlert</a></li><li><a href="global.html#showAppConfirm">showAppConfirm</a></li><li><a href="global.html#showAppPrompt">showAppPrompt</a></li><li><a href="global.html#showBulkConfirm">showBulkConfirm</a></li><li><a href="global.html#showCatalogHistoryModal">showCatalogHistoryModal</a></li><li><a href="global.html#showDebugModal">showDebugModal</a></li><li><a href="global.html#showDetailsModal">showDetailsModal</a></li><li><a href="global.html#showFaqModal">showFaqModal</a></li><li><a href="global.html#showFilesModal">showFilesModal</a></li><li><a href="global.html#showFullChangelog">showFullChangelog</a></li><li><a href="global.html#showGoldbackHistoryModal">showGoldbackHistoryModal</a></li><li><a href="global.html#showManualInput">showManualInput</a></li><li><a href="global.html#showNotes">showNotes</a></li><li><a href="global.html#showNotesView">showNotesView</a></li><li><a href="global.html#showNumistaResults">showNumistaResults</a></li><li><a href="global.html#showPcgsFieldPicker">showPcgsFieldPicker</a></li><li><a href="global.html#showProviderInfo">showProviderInfo</a></li><li><a href="global.html#showSettingsModal">showSettingsModal</a></li><li><a href="global.html#showStaticVersionBadge">showStaticVersionBadge</a></li><li><a href="global.html#showSyncConflictModal">showSyncConflictModal</a></li><li><a href="global.html#showSyncUpdateModal">showSyncUpdateModal</a></li><li><a href="global.html#showTagInput">showTagInput</a></li><li><a href="global.html#showVaultStatus">showVaultStatus</a></li><li><a href="global.html#showViewModal">showViewModal</a></li><li><a href="global.html#simpleHash">simpleHash</a></li><li><a href="global.html#simplifyChipValue">simplifyChipValue</a></li><li><a href="global.html#sortInventory">sortInventory</a></li><li><a href="global.html#sortInventoryByDateNewestFirst">sortInventoryByDateNewestFirst</a></li><li><a href="global.html#sparklineInstances">sparklineInstances</a></li><li><a href="global.html#spotHistory">spotHistory</a></li><li><a href="global.html#spotPrices">spotPrices</a></li><li><a href="global.html#startBulkSync">startBulkSync</a></li><li><a href="global.html#startCellEdit">startCellEdit</a></li><li><a href="global.html#startSpotInlineEdit">startSpotInlineEdit</a></li><li><a href="global.html#startSyncPoller">startSyncPoller</a></li><li><a href="global.html#stopSyncPoller">stopSyncPoller</a></li><li><a href="global.html#stripNonAlphanumeric">stripNonAlphanumeric</a></li><li><a href="global.html#switchLogTab">switchLogTab</a></li><li><a href="global.html#switchProviderTab">switchProviderTab</a></li><li><a href="global.html#switchSettingsSection">switchSettingsSection</a></li><li><a href="global.html#syncAllProviders">syncAllProviders</a></li><li><a href="global.html#syncChipToggle">syncChipToggle</a></li><li><a href="global.html#syncCurrencySettingsUI">syncCurrencySettingsUI</a></li><li><a href="global.html#syncGoldbackSettingsUI">syncGoldbackSettingsUI</a></li><li><a href="global.html#syncHasLocalChanges">syncHasLocalChanges</a></li><li><a href="global.html#syncHeaderToggleUI">syncHeaderToggleUI</a></li><li><a href="global.html#syncLayoutVisibilityUI">syncLayoutVisibilityUI</a></li><li><a href="global.html#syncProviderChain">syncProviderChain</a></li><li><a href="global.html#syncProviderPriorityUI">syncProviderPriorityUI</a></li><li><a href="global.html#syncRestoreOverrideBackup">syncRestoreOverrideBackup</a></li><li><a href="global.html#syncSaveOverrideBackup">syncSaveOverrideBackup</a></li><li><a href="global.html#syncSettingsUI">syncSettingsUI</a></li><li><a href="global.html#syncSpotPricesFromApi">syncSpotPricesFromApi</a></li><li><a href="global.html#testApiConnection">testApiConnection</a></li><li><a href="global.html#todayStr">todayStr</a></li><li><a href="global.html#toggleChange">toggleChange</a></li><li><a href="global.html#toggleCurrencyDropdown">toggleCurrencyDropdown</a></li><li><a href="global.html#toggleGlobalPriceView">toggleGlobalPriceView</a></li><li><a href="global.html#togglePriceView">togglePriceView</a></li><li><a href="global.html#toggleTheme">toggleTheme</a></li><li><a href="global.html#toggleVaultPasswordVisibility">toggleVaultPasswordVisibility</a></li><li><a href="global.html#tokenizeWords">tokenizeWords</a></li><li><a href="global.html#updateAllSparklines">updateAllSparklines</a></li><li><a href="global.html#updateCardSortBar">updateCardSortBar</a></li><li><a href="global.html#updateColumnVisibility">updateColumnVisibility</a></li><li><a href="global.html#updateFuzzyIndicator">updateFuzzyIndicator</a></li><li><a href="global.html#updateHistoryPullCost">updateHistoryPullCost</a></li><li><a href="global.html#updateItemCount">updateItemCount</a></li><li><a href="global.html#updateLastTimestamps">updateLastTimestamps</a></li><li><a href="global.html#updateManualSpot">updateManualSpot</a></li><li><a href="global.html#updateMatchIndicator">updateMatchIndicator</a></li><li><a href="global.html#updateModalCurrencyUI">updateModalCurrencyUI</a></li><li><a href="global.html#updatePortalHeight">updatePortalHeight</a></li><li><a href="global.html#updateProviderHistoryTables">updateProviderHistoryTables</a></li><li><a href="global.html#updateProviderSettings">updateProviderSettings</a></li><li><a href="global.html#updateSaveSearchButton">updateSaveSearchButton</a></li><li><a href="global.html#updateSettingsFooter">updateSettingsFooter</a></li><li><a href="global.html#updateSparkline">updateSparkline</a></li><li><a href="global.html#updateSpotCardColor">updateSpotCardColor</a></li><li><a href="global.html#updateSpotChangePercent">updateSpotChangePercent</a></li><li><a href="global.html#updateSpotTimestamp">updateSpotTimestamp</a></li><li><a href="global.html#updateStatusCell">updateStatusCell</a></li><li><a href="global.html#updateStorageStats">updateStorageStats</a></li><li><a href="global.html#updateStrengthBar">updateStrengthBar</a></li><li><a href="global.html#updateSummary">updateSummary</a></li><li><a href="global.html#updateSyncButtonStates">updateSyncButtonStates</a></li><li><a href="global.html#updateSyncStatusIndicator">updateSyncStatusIndicator</a></li><li><a href="global.html#updateThemeButton">updateThemeButton</a></li><li><a href="global.html#useSpotPrice">useSpotPrice</a></li><li><a href="global.html#validateFieldValue">validateFieldValue</a></li><li><a href="global.html#validateInventoryItem">validateInventoryItem</a></li><li><a href="global.html#validateItemFields">validateItemFields</a></li><li><a href="global.html#vaultDecrypt">vaultDecrypt</a></li><li><a href="global.html#vaultDecryptAndRestore">vaultDecryptAndRestore</a></li><li><a href="global.html#vaultDeriveKey">vaultDeriveKey</a></li><li><a href="global.html#vaultEncrypt">vaultEncrypt</a></li><li><a href="global.html#vaultEncryptToBytes">vaultEncryptToBytes</a></li><li><a href="global.html#vaultEncryptToBytesScoped">vaultEncryptToBytesScoped</a></li><li><a href="global.html#vaultRandomBytes">vaultRandomBytes</a></li><li><a href="global.html#verifyPcgsCert">verifyPcgsCert</a></li><li><a href="global.html#wireChipSortToggle">wireChipSortToggle</a></li><li><a href="global.html#wireFeatureFlagToggle">wireFeatureFlagToggle</a></li><li><a href="global.html#wireStorageToggle">wireStorageToggle</a></li><li><a href="global.html#xhrLoadJSON">xhrLoadJSON</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Thu Feb 19 2026 08:11:00 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
